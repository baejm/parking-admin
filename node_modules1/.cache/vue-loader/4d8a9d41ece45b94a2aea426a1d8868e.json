{"remainingRequest":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\src\\components\\operatingFunc\\imageShooting.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\src\\components\\operatingFunc\\imageShooting.vue","mtime":1605772689109},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAiLi4vLi4vY29uZmlnLmpzIgppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgcmV0dXJuIHsKICAgICAgdmVoaWNsZVBpY3R1cmU6IFtdLAogICAgICAgaW1hZ2VfbmFtZTogIiIsCiAgICAgIGltYWdlVGl0bGU6ICIiCiAgICB9CiAgfSwgCiAgY29tcHV0ZWQ6IHsKICAgICAuLi5tYXBTdGF0ZShbIm1haW5UaXRsZSJdKSwgICAKICB9LAogIGNyZWF0ZWQoKSB7ICAgICAKICAgIHRoaXMuJHNvY2tldC5vbigibWVzc2FnZV9mcm9tX3NlcnZlciIsIGRhdGEgPT4gewogICAgLy8gIGNvbnNvbGUubG9nKCJkYXRhLmtpbmQgOiAiLCBkYXRhLmtpbmQpCiAgICAgIHRoaXMuaW1hZ2VfcmVzcG9uc2UoZGF0YSkKICAgIH0pLAogICAgICB0aGlzLm5hbWVfY2hlY2soKQogICAgICAKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIGNvbnN0IGZybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKQogICAgICBmcm0uc2V0QXR0cmlidXRlKCdpZCcsICdhdXRoLWZvcm0nKQogICAgICBmcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCB0aGlzLmltYWdlX25hbWUpCiAgICAgIGZybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdnZXQnKQogICAgICBmcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnYXV0aC1mb3JtJykKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmcm0pCiAgICAgIHdpbmRvdy5vcGVuKAogICAgICAgICdhYm91dDpibGFuaycsCiAgICAgICAgJ2F1dGgtZm9ybScsCiAgICAgICAgJ3dpZHRoPScgKwoKICAgIHBhcnNlSW50KHdpbmRvdy5pbm5lcldpZHRoKSAqIDEgKwogICAgJyxoZWlnaHQ9JyArCiAgICBwYXJzZUludCh3aW5kb3cuaW5uZXJIZWlnaHQpICogMSArCiAgICAnLHRvb2xiYXI9MCxtZW51YmFyPTAsbG9jYXRpb249MCxzdGF0dXM9MCxzY3JvbGxiYXJzPTEscmVzaXphYmxlPTAsbGVmdD0wLHRvcD0wJwogICAgICApCiAgICAgIGZybS5zdWJtaXQoKQogICAgfSwKICAgIGltYWdlX2NhcHR1cmUoYykgeyAgICAgIAogICAgICB0aGlzLnZlaGljbGVQaWN0dXJlLmZvckVhY2goaW1nU2hvdyA9PiB7CiAgICAgICAgaWYgKGltZ1Nob3cuYWN0aXZlID09PSB0cnVlKSB7CiAgICAgICAgICAvLyB0aGlzLnRpdGxlSW1nID0gaW1nU2hvdy5zcG90CiAgICAgICAgICBpbWdTaG93LmFjdGl2ZSA9IGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgICBjLmFjdGl2ZSA9IHRydWUKICAgICAgY29uc29sZS5sb2coImltYWdlX2Nhc3B0dXJlIDogIiwgYykKICAgICAgbGV0IG9iajEgPSB7fQogICAgICBsZXQgZGlyZWN0aW9uID0gIm91dCIKICAgICAgaWYgKGMuZGlyZWN0aW9uID09PSAiaW4iKSB7CiAgICAgICAgZGlyZWN0aW9uID0gImluIgogICAgICB9CiAgICAgIG9iajEuZGlyZWN0aW9uID0gZGlyZWN0aW9uCiAgICAgIG9iajEua2luZCA9ICJpbWFnZV9jYXB0dXJlIgogICAgICBvYmoxLmNhbWVyYV9pZCA9IGMudHlwZQogICAgICBvYmoxLmxvY2F0aW9uID0gYy5sb2NhdGlvbgogICAgICBvYmoxLmxvb3BfZXZlbnRfdGltZSA9IERhdGUubm93KCkKICAgICAgY29uc29sZS5sb2coImltYWdlX2NhcHR1cmUgcmVxIG9iaiA6Iiwgb2JqMSkKICAgICAgdGhpcy5zZW5kTWVzc2FnZShvYmoxKQogICAgfSwKICAgIG5hbWVfY2hlY2soKSB7CiAgICAgIHRoaXMudmVoaWNsZVBpY3R1cmUgPSBbXQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZy5pcF9jYW1lcmFfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBvYmogPSBjb25maWcuaXBfY2FtZXJhX2xpc3RbaV0KICAgICAgICBvYmoudHlwZSA9IGNvbmZpZy5pcF9jYW1lcmFfbGlzdFtpXS5jYW1lcmFfaWQKICAgICAgICB0aGlzLnZlaGljbGVQaWN0dXJlLnB1c2gob2JqKQogICAgICB9CiAgICAgIC8vIHRoaXMuYmFyX3BvbGljeV9mdW5fYWxsKCkKICAgIH0sCiAgICBzZW5kTWVzc2FnZShjKSB7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCJtZXNzYWdlX2Zyb21fd2ViX2NsaWVudCIsIGMpCiAgICB9LAogICAgaW1hZ2VfcmVzcG9uc2UoZGF0YSkgewogICAgIAogICAgICBpZiAoZGF0YS5raW5kID09PSAiY2FwdHVyZV9pbWFnZSIpIHsKICAgICAgICAgY29uc29sZS5sb2coImRhdGEgOiAiLCBkYXRhKQogICAgICAgIGxldCBkaXJlY3Rpb24gPSAib3V0IgogICAgICAgIGlmIChkYXRhLmRpcmVjdGlvbiA9PT0gImluIikgewogICAgICAgICAgZGlyZWN0aW9uID0gImluIgogICAgICAgIH0KICAgICAgICB0aGlzLmltYWdlX25hbWUgPSBjb25maWcuaW1hZ2Vfc3JjICsgZGF0YS5mb2xkZXJfbmFtZSArICIvIiArIGRhdGEuZm5hbWUKICAgICAgICB0aGlzLmltYWdlVGl0bGUgPSBkYXRhLmxvY2F0aW9uICsgIl8iICsgZGlyZWN0aW9uICsgZGF0YS5jYW1lcmFfaWQKICAgICAgICBjb25zb2xlLmxvZygidGhpcy5pbWFnZVRpdGxlIDogIiwgdGhpcy5pbWFnZVRpdGxlKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["imageShooting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"imageShooting.vue","sourceRoot":"src/components/operatingFunc","sourcesContent":["<template>\n <div class=\"report_wrap\">\n   <div class=\"title\">\n      <h2>{{mainTitle[1].subMenu[1].title}}</h2>\n    </div>\n    <div class=\"main_content\">\n      <h2>\n        <font-awesome-icon icon=\"camera\" style=\"color:#26a95e\" />※실시간으로\n        촬영되고 있는 영상입니다.\n      </h2>\n      <div class=\"screen-control\">\n        <ul>\n          <li\n            v-for=\"(v, index) in vehiclePicture\"\n            :key=\"index\"\n            :class=\"{ active: v.active }\"\n          >\n            <button @click=\"image_capture(v)\">\n              {{ v.location + \"_\" + v.direction + v.type }}\n            </button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"screen-img_wrap\">\n        <div class=\"screen-img\">\n          <img :src=\"image_name\" alt=\"\" @click=\"submitForm\" />          \n          <!-- <img src=\"http://ht1.iptime.org:3000/images/2020_11_17/1605598824295.jpg\" alt=\"\"  @click=\"submitForm\" /> -->\n        </div>\n        <!-- <div class=\"img-title\">{{ imageTitle }}</div> -->\n      </div>      \n    </div>\n </div>\n</template>\n<script>\nimport config from \"../../config.js\"\nimport { mapState } from \"vuex\"\nexport default {\n  data: function() {\n   return {\n      vehiclePicture: [],\n       image_name: \"\",\n      imageTitle: \"\"\n    }\n  }, \n  computed: {\n     ...mapState([\"mainTitle\"]),   \n  },\n  created() {     \n    this.$socket.on(\"message_from_server\", data => {\n    //  console.log(\"data.kind : \", data.kind)\n      this.image_response(data)\n    }),\n      this.name_check()\n      \n  },\n  methods: {\n    submitForm() {\n      const frm = document.createElement('form')\n      frm.setAttribute('id', 'auth-form')\n      frm.setAttribute('action', this.image_name)\n      frm.setAttribute('method', 'get')\n      frm.setAttribute('target', 'auth-form')\n      document.body.appendChild(frm)\n      window.open(\n        'about:blank',\n        'auth-form',\n        'width=' +\n\n    parseInt(window.innerWidth) * 1 +\n    ',height=' +\n    parseInt(window.innerHeight) * 1 +\n    ',toolbar=0,menubar=0,location=0,status=0,scrollbars=1,resizable=0,left=0,top=0'\n      )\n      frm.submit()\n    },\n    image_capture(c) {      \n      this.vehiclePicture.forEach(imgShow => {\n        if (imgShow.active === true) {\n          // this.titleImg = imgShow.spot\n          imgShow.active = false\n        }\n      })\n      c.active = true\n      console.log(\"image_caspture : \", c)\n      let obj1 = {}\n      let direction = \"out\"\n      if (c.direction === \"in\") {\n        direction = \"in\"\n      }\n      obj1.direction = direction\n      obj1.kind = \"image_capture\"\n      obj1.camera_id = c.type\n      obj1.location = c.location\n      obj1.loop_event_time = Date.now()\n      console.log(\"image_capture req obj :\", obj1)\n      this.sendMessage(obj1)\n    },\n    name_check() {\n      this.vehiclePicture = []\n      for (let i = 0; i < config.ip_camera_list.length; i++) {\n        let obj = config.ip_camera_list[i]\n        obj.type = config.ip_camera_list[i].camera_id\n        this.vehiclePicture.push(obj)\n      }\n      // this.bar_policy_fun_all()\n    },\n    sendMessage(c) {\n      this.$socket.emit(\"message_from_web_client\", c)\n    },\n    image_response(data) {\n     \n      if (data.kind === \"capture_image\") {\n         console.log(\"data : \", data)\n        let direction = \"out\"\n        if (data.direction === \"in\") {\n          direction = \"in\"\n        }\n        this.image_name = config.image_src + data.folder_name + \"/\" + data.fname\n        this.imageTitle = data.location + \"_\" + direction + data.camera_id\n        console.log(\"this.imageTitle : \", this.imageTitle)\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n</style>"]}]}