{"remainingRequest":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\src\\components\\operatingFunc\\vehicleEntryExitLive.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\src\\components\\operatingFunc\\vehicleEntryExitLive.vue","mtime":1605775576149},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OneDrive\\bae\\manned_parking\\02_ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAiLi4vLi4vY29uZmlnLmpzIgppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIAogICAgICBkYXRhTGlzdDogW3tnZXRfdGltZToiIixnZXRfbG9jYXRpb246IiIsZ2V0X2RpcmVjdGlvbjoiIixnZXRfbHA6IiIsZ2V0X2ZlZTowLGdldF9wYWlkX2ZlZTowLGdldF9yZWdpc3RlcmVkOiIiLGdldF9jb250ZW50czoiIn1dLAogICAgICBjYXJtZXJhX2xpc3Q6IFsgICB7CiAgICAgIGtpbmRfYmFyX3N0YXR1czogImJhcnJpZXJfc3RhdHVzIiwKICAgICAga2luZF9iYXJfcG9saWN5OiAiYmFyX3Bsb2ljeSIsCiAgICAgIHN0YXR1czogImRvd24iLAogICAgICBsb2NhdGlvbjogIuygleusuOyeheq1rCIsCiAgICAgIGRpcmVjdGlvbjogImluIiwKICAgICAgbHA6ICIxMjPqsIA0NTY3IiwKICAgICAgaW1hZ2VfZGlzcGxheTogZmFsc2UsCiAgICAgIGJhcnJpZXJfY29udHJvbF9kaXNwbGF5OiB0cnVlLAogICAgICBiYXJyaWVyX3BvbGljeV9uYW1lOiAiYmFycmllcl9wb2xpY3kxIiwKICAgICAgaW1hZ2VfbmFtZTogcmVxdWlyZSgiLi4vLi4vYXNzZXRzL2Nhcl90ZXN0MS5qcGciKSwKICAgICAgY2hlY2tlZE5hbWVzOiAiYWxsX3ZlaGljbGUiCiAgICB9LAogICAgewogICAgICBraW5kOiAiYmFycmllcl9zdGF0dXMiLAogICAgICBzdGF0dXM6ICJkb3duIiwKICAgICAgbG9jYXRpb246ICLsoJXrrLjstpzqtawiLAogICAgICBkaXJlY3Rpb246ICJvdXQiLAogICAgICBscDogIjU0NuqwgDE1MTciLAogICAgICBpbWFnZV9kaXNwbGF5OiBmYWxzZSwKICAgICAgYmFycmllcl9jb250cm9sX2Rpc3BsYXk6IHRydWUsCiAgICAgIGJhcnJpZXJfcG9saWN5X25hbWU6ICJiYXJyaWVyX3BvbGljeTIiLAogICAgICBpbWFnZV9uYW1lOiByZXF1aXJlKCIuLi8uLi9hc3NldHMvY2FyX3Rlc3QyLmpwZyIpLAogICAgICBjaGVja2VkTmFtZXM6ICJyZWdpc3RlcmVkX3ZlaGljbGUiICAgICAKICAgIH1dLAogICAgICBzdGFydF90aW1lOiBuZXcgRGF0ZSgpLAogICAgICBlbmRfdGltZTogbmV3IERhdGUoKSwKICAgICAgdG90YWxfcGFya2luZ19mZWU6IDAsCiAgICAgIHRvdGFsX2Rpc2NvdW50ZWRfZmVlOiAwLAogICAgICB0b3RhbF9wYWlkX2ZlZTogMCwKICAgICAgdG9nZ2xlOiBmYWxzZSwKICAgICAgb3BlbmZpeDogZmFsc2UsCiAgICAgIG5vc2lnbmFsOiBmYWxzZSwKICAgICAgbGlzdF9pdGVtczogewogICAgICAgIHRpbWU6ICLtmITsnqzsi5zqsIQiLAogICAgICAgIGxvb3BfZXZlbnRfdGltZTogInBj7Iuc6rCEIiwKICAgICAgICBsb2NhdGlvbjogIjHqtazsl60iLAogICAgICAgIGRpcmVjdGlvbjogIkluIiwKICAgICAgICBscDogIjEyM+qwgDQ1NjciLAogICAgICAgIHJlc2lzdGVyZWQ6ICLrk7HroZ3ssKjrn4kiLAogICAgICAgIGRvbmdfaG86ICIxMDHrj5kiLAogICAgICAgIGltYWdlX2Rpc3BsYXk6IGZhbHNlLAogICAgICAgIGltYWdlX25hbWU6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9jYXJfdGVzdDQuanBnIikKICAgICAgfSwKICAgICAgY2hlY2tlZDogW10sCiAgICAgIGJ1dHRvbl92YWx1ZTogWwogICAgICAgIHsgbmFtZTogIuqwnOuwqSIsIGNoZWNrZWQ6IHRydWUgfSwKICAgICAgICB7IG5hbWU6ICLtkoDrprwiLCBjaGVja2VkOiBmYWxzZSB9CiAgICAgIF0KICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGN1cnJlbmN5OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICB2YXIgbnVtID0gbmV3IE51bWJlcih2YWx1ZSkKICAgICAgcmV0dXJuIG51bS50b0ZpeGVkKDApLnJlcGxhY2UoLyhcZCkoPz0oXGR7M30pKyg/OlwuXGQrKT8kKS9nLCAiJDEsIikKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAgLi4ubWFwU3RhdGUoWyJtYWluVGl0bGUiXSksCiAgICBjb3VudF9pbigpIHsKICAgICAgbGV0IGNvdW50ID0gMAogICAgICB0aGlzLmRhdGFMaXN0LmZvckVhY2goY290ID0+IHsKICAgICAgICBpZiAoY290LmdldF9kaXJlY3Rpb24gPT09ICJpbiIpIGNvdW50KysKICAgICAgfSkKICAgICAgcmV0dXJuIGNvdW50CiAgICB9LAogICAgY291bnRfb3V0KCkgewogICAgICBsZXQgY291bnQgPSAwCiAgICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaChjb3QgPT4gewogICAgICAgIGlmIChjb3QuZ2V0X2RpcmVjdGlvbiA9PT0gIm91dCIpIGNvdW50KysKICAgICAgfSkKICAgICAgcmV0dXJuIGNvdW50CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc29ja2V0Lm9uKCJtZXNzYWdlX2Zyb21fc2VydmVyIiwgZGF0YSA9PiB7ICAgICAgICAgCiAgICAgIHRoaXMubHByX3Byb2Nlc3MoZGF0YSkKICAgIH0pLAogICAgICB0aGlzLmJhcnJpZXJfbmFtZV9jaGVjaygpLAogICAgICAvLyB0aGlzLmJhcnJpZXJfcG9saWN5X3F1ZXJ5KCksCiAgICAgIC8vdGhpcy5iYXJfc3RhdHVzX3F1ZXJ5KCksCiAgICAgIHRoaXMuc3RhcnQoKSwKICAgICAgdGhpcy52ZWhpY2xlX29ial9saXN0X2ZpbmQoKQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybShldmVudCkgewogICAgICBjb25zdCBmcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJykKICAgICAgZnJtLnNldEF0dHJpYnV0ZSgnaWQnLCAnaW1nJykKICAgICAgZnJtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgZXZlbnQuaW1hZ2VfbmFtZSkKICAgICAgZnJtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ2dldCcpCiAgICAgIGZybS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdpbWcnKQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZybSkKICAgICAgd2luZG93Lm9wZW4oCiAgICAgICAgJ2Fib3V0OmJsYW5rJywKICAgICAgICAnaW1nJywKICAgICAgICAnd2lkdGg9JyArCiAgICBwYXJzZUludCh3aW5kb3cuaW5uZXJXaWR0aCkgKiAxICsKICAgICcsaGVpZ2h0PScgKwogICAgcGFyc2VJbnQod2luZG93LmlubmVySGVpZ2h0KSAqIDEgKwogICAgJyx0b29sYmFyPTAsbWVudWJhcj0wLGxvY2F0aW9uPTAsc3RhdHVzPTAsc2Nyb2xsYmFycz0xLHJlc2l6YWJsZT0wLGxlZnQ9MCx0b3A9MCcKICAgICAgKQogICAgICAKICAgICAgZnJtLnN1Ym1pdCgpCiAgICB9LAogICAgbHByX3Byb2Nlc3MoZGF0YTEpIHsKICAgICAgaWYgKGRhdGExLmtpbmQgPT09ICJiYXJyaWVyX3N0YXR1cyIpIHsKICAgICAgICBjb25zb2xlLmxvZygiYmFycmllcl9zdGF0dXMiLCBkYXRhMSkKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoZGF0YTEubG9jYXRpb24gPT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0ubG9jYXRpb24pIHsKICAgICAgICAgICAgaWYgKGRhdGExLnN0YXR1cyA9PT0gImRvd24iIHx8IGRhdGExLnN0YXR1cyA9PT0gIkRPV04iKSB7CiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3RbaV0uaW1hZ2VfZGlzcGxheSA9IGZhbHNlCiAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnB1c2godGVtcCkKICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5zcGxpY2UodGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoIC0gMSwgMSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdFtpXS5pbWFnZV9kaXNwbGF5ID0gdHJ1ZQogICAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5wdXNoKHRlbXApCiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3Quc3BsaWNlKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCAtIDEsIDEpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YTEua2luZCA9PT0gImJhcl9tb2RlIikgewogICAgICAgIGNvbnNvbGUubG9nKCJiYXJfbW9kZSIsIGRhdGExKQogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YTEuZG9jcy5sZW5ndGg7IGorKykgewogICAgICAgICAgbGV0IGJhcl9tb2RlID0gZGF0YTEuZG9jc1tqXQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgYmFyX21vZGUubG9jYXRpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmxvY2F0aW9uICYmICBiYXJfbW9kZS5kaXJlY3Rpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmRpcmVjdGlvbgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICBpZiAoYmFyX21vZGUubW9kZSA9PT0gImxvY2siKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdFtpXS5vcGVuZml4ID0gdHJ1ZQogICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3Quc3BsaWNlKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCAtIDEsIDEpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLm9wZW5maXggPSBmYWxzZQogICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3Quc3BsaWNlKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCAtIDEsIDEpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YTEua2luZCA9PT0gImJhcl9zdGF0dXMiKSB7CiAgICAgICAgY29uc29sZS5sb2coImJhcl9zdGF0dXMiLCBkYXRhMSkKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGExLmRvY3MubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGxldCBiYXJfc3RhdHVzID0gZGF0YTEuZG9jc1tqXQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgYmFyX3N0YXR1cy5sb2NhdGlvbiA9PT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0ubG9jYXRpb24gJiYKICAgICAgICAgICAgICBiYXJfc3RhdHVzLmRpcmVjdGlvbiA9PSB0aGlzLmNhcm1lcmFfbGlzdFtpXS5kaXJlY3Rpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgaWYgKGRhdGExLnN0YXR1cyA9PT0gImRvd24iIHx8IGRhdGExLnN0YXR1cyA9PT0gIkRPV04iKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdFtpXS5pbWFnZV9kaXNwbGF5ID0gZmFsc2UKICAgICAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnB1c2godGVtcCkKICAgICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnNwbGljZSh0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGggLSAxLCAxKQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YTEuc3RhdHVzID09PSAidXAiIHx8IGRhdGExLnN0YXR1cyA9PT0gIlVQIil7CiAgICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdFtpXS5pbWFnZV9kaXNwbGF5ID0gdHJ1ZQogICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3Quc3BsaWNlKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCAtIDEsIDEpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YTEua2luZCA9PT0gInNvY2tldF9lcnJvciIpIHsKICAgICAgICAvLyAgY29uc29sZS5sb2coInNvY2tldCBlcnJvciA6ICIsIGRhdGExKQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZGF0YTEubG9jYXRpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmxvY2F0aW9uICYmCiAgICAgICAgICAgIGRhdGExLmRpcmVjdGlvbiA9PT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0uZGlyZWN0aW9uCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3RbaV0ubm9zaWduYWwgPSB0cnVlCiAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5zcGxpY2UodGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoIC0gMSwgMSkKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi67O064K86rCSIiwgdGhpcy5jYXJtZXJhX2xpc3RbMF0uc3RhdHVzKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhMS5raW5kID09PSAid2Vla2x5X2JhcnJpZXJfcG9saWN5IikgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZGF0YTEubG9jYXRpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmxvY2F0aW9uICYmCiAgICAgICAgICAgIGRhdGExLmRpcmVjdGlvbiA9PT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0uZGlyZWN0aW9uCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKGRhdGExLmJhcnJpZXJfcG9saWN5ID09PSAi6rCc67CpIikgewogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLmNoZWNrZWROYW1lcyA9ICJhbGxfdmVoaWNsZSIKICAgICAgICAgICAgICBsZXQgdGVtcCA9IHt9CiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnNwbGljZSh0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGggLSAxLCAxKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29uZmlnLmJhcnJpZXJfZGlzcGxheV9saXN0Lmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIGRhdGExLmxvY2F0aW9uID09PSBjb25maWcuYmFycmllcl9kaXNwbGF5X2xpc3Rbal0ubG9jYXRpb24gJiYKICAgICAgICAgICAgICAgICAgZGF0YTEuZGlyZWN0aW9uID09PSBjb25maWcuYmFycmllcl9kaXNwbGF5X2xpc3Rbal0uZGlyZWN0aW9uCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3RbaV0uY2hlY2tlZE5hbWVzID0KICAgICAgICAgICAgICAgICAgICBjb25maWcuYmFycmllcl9kaXNwbGF5X2xpc3Rbal0uY2hlY2tlZE5hbWVzCiAgICAgICAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5zcGxpY2UodGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoIC0gMSwgMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YTEua2luZCA9PT0gInNvY2tldF9ub3JtYWwiKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coInNvY2tldCBub3JtYWwgOiAiLCBkYXRhMSkKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGRhdGExLmxvY2F0aW9uID09PSB0aGlzLmNhcm1lcmFfbGlzdFtpXS5sb2NhdGlvbiAmJgogICAgICAgICAgICBkYXRhMS5kaXJlY3Rpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmRpcmVjdGlvbgogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLm5vc2lnbmFsID0gZmFsc2UKICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5wdXNoKHRlbXApCiAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnNwbGljZSh0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGggLSAxLCAxKQogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCLrs7TrgrzqsJIiLCB0aGlzLmNhcm1lcmFfbGlzdFswXS5zdGF0dXMpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGExLmtpbmQgPT0gImxwciIpIHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhMS5raW5kLCBkYXRhMSkKICAgICAgICAvL3ZhciBpbWFnZV9uYW1lID0gImxvY2FsaG9zdDo3MjAwL2ltYWdlcy8iK2RhdGExLmZvbGRlcl9uYW1lKyIvIitkYXRhMS5maWxlbmFtZQogICAgICAgIGxldCBpbWFnZV9uYW1lID0KICAgICAgICAgIGNvbmZpZy5pbWFnZV9zcmMgKyBkYXRhMS5mb2xkZXJfbmFtZSArICIvIiArIGRhdGExLmZpbGVuYW1lCiAgICAgICAgLy8gY29uc29sZS5sb2coImltYWdlX25hbWUgOiAiLCBpbWFnZV9uYW1lKQogICAgICAgIC8vCWNvbnNvbGUubG9nKCJkYXRhTGlzdCA6ICIsIHRoaXMuZGF0YUxpc3QpOwogICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgIGRhdGExLmRpcmVjdGlvbjEgPSAiaW4iCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGExLmRpcmVjdGlvbjEgPSAib3V0IgogICAgICAgIH0KICAgICAgICBsZXQgZmxhZyA9IGZhbHNlCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xvb3BfZXZlbnRfdGltZSwgdGhpcy5kYXRhTGlzdFtpXS5nZXRfbHApOwogICAgICAgICAgaWYgKHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xvb3BfZXZlbnRfdGltZSA9PT0gZGF0YTEubG9vcF9ldmVudF90aW1lKSB7CiAgICAgICAgICAgIGlmIChkYXRhMS5scCAhPSAi66+47J247IudIikgewogICAgICAgICAgICAgIC8vIOuTpOyWtOyYqCDssKjrn4nsnbQg66+47J247Iud7J20IOyVhOuLiOuptAogICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFMaXN0W2ldLmdldF9scCA9PT0gIuuvuOyduOyLnSIpIHsKICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xwID0gZGF0YTEubHAKICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3JlZ2lzdGVyZWQgPSBkYXRhMS5yZWdpc3RlcmVkCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXJlY3Rpb24gPSBkYXRhMS5kaXJlY3Rpb24xCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9jb250ZW50cyA9IGRhdGExLmNvbnRlbnRzCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9pbWFnZV9uYW1lID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfaW1hZ2VfbmFtZSA9IGltYWdlX25hbWUKICAgICAgICAgICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlID0gMAogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9mZWUgPSAwCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoIWRhdGExLmRpc2NvdW50ZWRfZmVlKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YTEuZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhMS5mZWUgfHwgZGF0YTEuZmVlID09PSA5OTk4IHx8IGRhdGExLmZlZSA9PT0gOTk5OSkgewogICAgICAgICAgICAgICAgICAgIGRhdGExLmZlZSA9IDAKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoIWRhdGExLmZlZSB8fCBkYXRhMS5mZWUgPT09IDk5OTggfHwgZGF0YTEuZmVlID09PSA5OTk5KSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YTEucGFpZF9mZWUgPSAwCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZsYWcgPT09IHRydWUgOiIsIGRhdGExKQogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXNjb3VudGVkX2ZlZSA9IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgIGRhdGExLmRpc2NvdW50ZWRfZmVlLAogICAgICAgICAgICAgICAgICAgIDEwCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfcGFpZF9mZWUgPSBwYXJzZUludChkYXRhMS5wYWlkX2ZlZSwgMTApCiAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ZlZSA9IHBhcnNlSW50KGRhdGExLmZlZSwgMTApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIC8vCWNvbnNvbGUubG9nKGRhdGExLmxwLCB0aGlzLmNhcm1lcmFfbGlzdFtpXS5sb2NhdGlvbiwgZGF0YTEubG9jYXRpb24pOwogICAgICAgICAgICAgICAgICBpZiAoZGF0YTEubG9jYXRpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmxvY2F0aW9uICYmIGRhdGExLmRpcmVjdGlvbiA9PT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0uZGlyZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3RbaV0ubHAgPSBkYXRhMS5scAogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLmltYWdlX25hbWUgPSBpbWFnZV9uYW1lCiAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnB1c2godGVtcCkKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5zcGxpY2UodGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoIC0gMSwgMSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZsYWcgPSB0cnVlCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmbGFnID09IGZhbHNlKSB7CiAgICAgICAgICBsZXQgdGVtcCA9IHt9CiAgICAgICAgICB0ZW1wLmdldF90aW1lID0gZm9ybWF0X3RpbWUobmV3IERhdGUoZGF0YTEubG9vcF9ldmVudF90aW1lKSkKICAgICAgICAgIHRlbXAuZ2V0X2xvb3BfZXZlbnRfdGltZSA9IGRhdGExLmxvb3BfZXZlbnRfdGltZQogICAgICAgICAgdGVtcC5nZXRfbG9jYXRpb24gPSBkYXRhMS5sb2NhdGlvbgogICAgICAgICAgdGVtcC5nZXRfbHAgPSBkYXRhMS5scAogICAgICAgICAgdGVtcC5nZXRfcmVnaXN0ZXJlZCA9IGRhdGExLnJlZ2lzdGVyZWQKICAgICAgICAgIHRlbXAuZ2V0X2RpcmVjdGlvbiA9IGRhdGExLmRpcmVjdGlvbjEKICAgICAgICAgIHRlbXAuZ2V0X2NvbnRlbnRzID0gZGF0YTEuY29udGVudHMKICAgICAgICAgIHRlbXAuZ2V0X2ltYWdlX2Rpc3BsYXkgPSB0cnVlCiAgICAgICAgICB0ZW1wLmdldF9pbWFnZV9uYW1lID0gaW1hZ2VfbmFtZQogICAgICAgICAgaWYgKGRhdGExLmRpcmVjdGlvbiA9PT0gImluIikgewogICAgICAgICAgICB0ZW1wLmdldF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgdGVtcC5nZXRfcGFpZF9mZWUgPSAwCiAgICAgICAgICAgIHRlbXAuZ2V0X2ZlZSA9IDAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghZGF0YTEuZGlzY291bnRlZF9mZWUpIHsKICAgICAgICAgICAgICBkYXRhMS5kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGExLmZlZSkgewogICAgICAgICAgICAgIGRhdGExLmZlZSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGExLnBhaWRfZmVlKSB7CiAgICAgICAgICAgICAgZGF0YTEucGFpZF9mZWUgPSAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcC5nZXRfZGlzY291bnRlZF9mZWUgPSBwYXJzZUludChkYXRhMS5kaXNjb3VudGVkX2ZlZSwgMTApCiAgICAgICAgICAgIHRlbXAuZ2V0X3BhaWRfZmVlID0gcGFyc2VJbnQoZGF0YTEucGFpZF9mZWUsIDEwKQogICAgICAgICAgICB0ZW1wLmdldF9mZWUgPSBwYXJzZUludChkYXRhMS5mZWUsIDEwKQogICAgICAgICAgICBjb25zb2xlLmxvZygiZmxhZyA9PT0gZmFsc2UgOiAiLCBkYXRhMSkKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZGF0YUxpc3QudW5zaGlmdCh0ZW1wKQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLwljb25zb2xlLmxvZyhkYXRhMS5scCwgdGhpcy5jYXJtZXJhX2xpc3RbaV0ubG9jYXRpb24sIGRhdGExLmxvY2F0aW9uKTsKICAgICAgICAgICAgaWYgKGRhdGExLmxvY2F0aW9uID09PSB0aGlzLmNhcm1lcmFfbGlzdFtpXS5sb2NhdGlvbiAmJiBkYXRhMS5kaXJlY3Rpb24gPT09IHRoaXMuY2FybWVyYV9saXN0W2ldLmRpcmVjdGlvbikgewogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLmxwID0gZGF0YTEubHAKICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdFtpXS5pbWFnZV9uYW1lID0gaW1hZ2VfbmFtZQogICAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgICB0aGlzLmNhcm1lcmFfbGlzdC5wdXNoKHRlbXApCiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3Quc3BsaWNlKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCAtIDEsIDEpCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgdG90YWxfcGFya2luZ19mZWUgPSAwCiAgICAgICAgbGV0IHRvdGFsX2Rpc2NvdW50ZWRfZmVlID0gMAogICAgICAgIGxldCB0b3RhbF9wYWlkX2ZlZSA9IDAKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRvdGFsX3BhcmtpbmdfZmVlICs9IHBhcnNlSW50KHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ZlZSwgMTApCiAgICAgICAgICB0b3RhbF9kaXNjb3VudGVkX2ZlZSArPSBwYXJzZUludCgKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfZGlzY291bnRlZF9mZWUsCiAgICAgICAgICAgIDEwCiAgICAgICAgICApCiAgICAgICAgICB0b3RhbF9wYWlkX2ZlZSArPSBwYXJzZUludCh0aGlzLmRhdGFMaXN0W2ldLmdldF9wYWlkX2ZlZSwgMTApCiAgICAgICAgfQogICAgICAgIHRoaXMudG90YWxfcGFya2luZ19mZWUgPSB0b3RhbF9wYXJraW5nX2ZlZQogICAgICAgIHRoaXMudG90YWxfZGlzY291bnRlZF9mZWUgPSB0b3RhbF9kaXNjb3VudGVkX2ZlZQogICAgICAgIHRoaXMudG90YWxfcGFpZF9mZWUgPSB0b3RhbF9wYWlkX2ZlZQogICAgICAgIC8vCWNvbnNvbGUubG9nKHRoaXMuY2FybWVyYV9saXN0Lmxlbmd0aCk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YTEua2luZCA9PSAiZmVlX2NhbGN1bGF0aW9uX3Jlc3VsdCIpIHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhMS5raW5kLCBkYXRhMSkKICAgICAgICAvL3ZhciBpbWFnZV9uYW1lID0gImxvY2FsaG9zdDo3MjAwL2ltYWdlcy8iK2RhdGExLmZvbGRlcl9uYW1lKyIvIitkYXRhMS5maWxlbmFtZQogICAgICAgIGxldCBpbWFnZV9uYW1lID0KICAgICAgICAgIGNvbmZpZy5pbWFnZV9zcmMgKyBkYXRhMS5mb2xkZXJfbmFtZSArICIvIiArIGRhdGExLmZpbGVuYW1lCiAgICAgICAgLy8gY29uc29sZS5sb2coImltYWdlX25hbWUgOiAiLCBpbWFnZV9uYW1lKQogICAgICAgIC8vCWNvbnNvbGUubG9nKCJkYXRhTGlzdCA6ICIsIHRoaXMuZGF0YUxpc3QpOwogICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgIGRhdGExLmRpcmVjdGlvbjEgPSAi7J6F7LCoIgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhMS5kaXJlY3Rpb24xID0gIuy2nOywqCIKICAgICAgICB9CiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmRhdGFMaXN0W2ldLmdldF9sb29wX2V2ZW50X3RpbWUsIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xwKTsKICAgICAgICAgIGlmICh0aGlzLmRhdGFMaXN0W2ldLmdldF9sb29wX2V2ZW50X3RpbWUgPT09IGRhdGExLmxvb3BfZXZlbnRfdGltZSkgewogICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9scCA9IGRhdGExLmxwCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3JlZ2lzdGVyZWQgPSBkYXRhMS5yZWdpc3RlcmVkCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2RpcmVjdGlvbiA9IGRhdGExLmRpcmVjdGlvbgogICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9jb250ZW50cyA9IGRhdGExLmNvbnRlbnRzCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ltYWdlX25hbWUgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ltYWdlX25hbWUgPSBpbWFnZV9uYW1lCiAgICAgICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9mZWUgPSAwCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCFkYXRhMS5kaXNjb3VudGVkX2ZlZSkgewogICAgICAgICAgICAgICAgZGF0YTEuZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghZGF0YTEuZmVlIHx8IGRhdGExLmZlZSA9PT0gOTk5OCB8fCBkYXRhMS5mZWUgPT09IDk5OTkpIHsKICAgICAgICAgICAgICAgIGRhdGExLmZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFkYXRhMS5wYWlkX2ZlZSkgewogICAgICAgICAgICAgICAgZGF0YTEucGFpZF9mZWUgPSAwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2Rpc2NvdW50ZWRfZmVlID0gcGFyc2VJbnQoCiAgICAgICAgICAgICAgICBkYXRhMS5kaXNjb3VudGVkX2ZlZSwKICAgICAgICAgICAgICAgIDEwCiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlID0gcGFyc2VJbnQoZGF0YTEucGFpZF9mZWUsIDEwKQogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ZlZSA9IHBhcnNlSW50KGRhdGExLmZlZSwgMTApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmxhZyA9IHRydWUKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGZsYWcgPT0gZmFsc2UpIHsKICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgIHRlbXAuZ2V0X3RpbWUgPSBmb3JtYXRfdGltZShuZXcgRGF0ZShkYXRhMS5sb29wX2V2ZW50X3RpbWUpKQogICAgICAgICAgdGVtcC5nZXRfbG9vcF9ldmVudF90aW1lID0gZGF0YTEubG9vcF9ldmVudF90aW1lCiAgICAgICAgICB0ZW1wLmdldF9sb2NhdGlvbiA9IGRhdGExLmxvY2F0aW9uCiAgICAgICAgICB0ZW1wLmdldF9scCA9IGRhdGExLmxwCiAgICAgICAgICB0ZW1wLmdldF9yZWdpc3RlcmVkID0gZGF0YTEucmVnaXN0ZXJlZAogICAgICAgICAgdGVtcC5nZXRfZGlyZWN0aW9uID0gZGF0YTEuZGlyZWN0aW9uCiAgICAgICAgICB0ZW1wLmdldF9jb250ZW50cyA9IGRhdGExLmNvbnRlbnRzCiAgICAgICAgICB0ZW1wLmdldF9pbWFnZV9kaXNwbGF5ID0gdHJ1ZQogICAgICAgICAgdGVtcC5nZXRfaW1hZ2VfbmFtZSA9IGltYWdlX25hbWUKICAgICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgdGVtcC5nZXRfZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgICAgIHRlbXAuZ2V0X3BhaWRfZmVlID0gMAogICAgICAgICAgICB0ZW1wLmdldF9mZWUgPSAwCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWRhdGExLmRpc2NvdW50ZWRfZmVlKSB7CiAgICAgICAgICAgICAgZGF0YTEuZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkYXRhMS5mZWUgfHwgZGF0YTEuZmVlID09PSA5OTk4IHx8IGRhdGExLmZlZSA9PT0gOTk5OSkgewogICAgICAgICAgICAgIGRhdGExLmZlZSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGExLnBhaWRfZmVlKSB7CiAgICAgICAgICAgICAgZGF0YTEucGFpZF9mZWUgPSAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcC5nZXRfZGlzY291bnRlZF9mZWUgPSBkYXRhMS5kaXNjb3VudGVkX2ZlZQogICAgICAgICAgICB0ZW1wLmdldF9wYWlkX2ZlZSA9IGRhdGExLnBhaWRfZmVlCiAgICAgICAgICAgIHRlbXAuZ2V0X2ZlZSA9IGRhdGExLmZlZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kYXRhTGlzdC51bnNoaWZ0KHRlbXApCiAgICAgICAgfQogICAgICAgIGxldCB0b3RhbF9wYXJraW5nX2ZlZSA9IDAKICAgICAgICBsZXQgdG90YWxfZGlzY291bnRlZF9mZWUgPSAwCiAgICAgICAgbGV0IHRvdGFsX3BhaWRfZmVlID0gMAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdG90YWxfcGFya2luZ19mZWUgKz0gcGFyc2VJbnQodGhpcy5kYXRhTGlzdFtpXS5nZXRfZmVlLCAxMCkKICAgICAgICAgIHRvdGFsX2Rpc2NvdW50ZWRfZmVlICs9IHBhcnNlSW50KAogICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXNjb3VudGVkX2ZlZSwKICAgICAgICAgICAgMTAKICAgICAgICAgICkKICAgICAgICAgIHRvdGFsX3BhaWRfZmVlICs9IHBhcnNlSW50KHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlLCAxMCkKICAgICAgICB9CiAgICAgICAgdGhpcy50b3RhbF9wYXJraW5nX2ZlZSA9IHRvdGFsX3BhcmtpbmdfZmVlCiAgICAgICAgdGhpcy50b3RhbF9kaXNjb3VudGVkX2ZlZSA9IHRvdGFsX2Rpc2NvdW50ZWRfZmVlCiAgICAgICAgdGhpcy50b3RhbF9wYWlkX2ZlZSA9IHRvdGFsX3BhaWRfZmVlCiAgICAgICAgLy8JY29uc29sZS5sb2codGhpcy5jYXJtZXJhX2xpc3QubGVuZ3RoKTsKICAgICAgfSBlbHNlIGlmIChkYXRhMS5raW5kID09ICJscHJfcGF5bWVudCIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGExLmtpbmQsIGRhdGExKQogICAgICAgIC8vdmFyIGltYWdlX25hbWUgPSAibG9jYWxob3N0OjcyMDAvaW1hZ2VzLyIrZGF0YTEuZm9sZGVyX25hbWUrIi8iK2RhdGExLmZpbGVuYW1lCiAgICAgICAgbGV0IGltYWdlX25hbWUgPQogICAgICAgICAgY29uZmlnLmltYWdlX3NyYyArIGRhdGExLmZvbGRlcl9uYW1lICsgIi8iICsgZGF0YTEuZmlsZW5hbWUKICAgICAgICAvLyAgY29uc29sZS5sb2coImltYWdlX25hbWUgOiAiLCBpbWFnZV9uYW1lKQogICAgICAgIC8vCWNvbnNvbGUubG9nKCJkYXRhTGlzdCA6ICIsIHRoaXMuZGF0YUxpc3QpOwogICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgIGRhdGExLmRpcmVjdGlvbjEgPSAiaW4iCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGExLmRpcmVjdGlvbjEgPSAib3V0IgogICAgICAgIH0KICAgICAgICBsZXQgZmxhZyA9IGZhbHNlCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xvb3BfZXZlbnRfdGltZSwgdGhpcy5kYXRhTGlzdFtpXS5nZXRfbHApOwogICAgICAgICAgaWYgKHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xvb3BfZXZlbnRfdGltZSA9PT0gZGF0YTEubG9vcF9ldmVudF90aW1lKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2xwID0gZGF0YTEubHAKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfcmVnaXN0ZXJlZCA9IGRhdGExLnJlZ2lzdGVyZWQKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfZGlyZWN0aW9uID0gZGF0YTEuZGlyZWN0aW9uCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2NvbnRlbnRzID0gZGF0YTEuY29udGVudHMKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfaW1hZ2VfbmFtZSA9IHRydWUKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfaW1hZ2VfbmFtZSA9IGltYWdlX25hbWUKICAgICAgICAgICAgaWYgKGRhdGExLmRpcmVjdGlvbiA9PT0gImluIikgewogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2Rpc2NvdW50ZWRfZmVlID0gMAogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlID0gMAogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2ZlZSA9IDAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoIWRhdGExLmRpc2NvdW50ZWRfZmVlKSB7CiAgICAgICAgICAgICAgICBkYXRhMS5kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFkYXRhMS5mZWUgfHwgZGF0YTEuZmVlID09PSA5OTk4IHx8IGRhdGExLmZlZSA9PT0gOTk5OSkgewogICAgICAgICAgICAgICAgZGF0YTEuZmVlID0gMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIWRhdGExLnBhaWRfZmVlKSB7CiAgICAgICAgICAgICAgICBkYXRhMS5wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfZGlzY291bnRlZF9mZWUgPSBkYXRhMS5kaXNjb3VudGVkX2ZlZQogICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlID0gZGF0YTEucGFpZF9mZWUKICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9mZWUgPSBkYXRhMS5mZWUKICAgICAgICAgICAgfQogICAgICAgICAgICBmbGFnID0gdHJ1ZQogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZmxhZyA9PSBmYWxzZSkgewogICAgICAgICAgbGV0IHRlbXAgPSB7fQogICAgICAgICAgdGVtcC5nZXRfdGltZSA9IGZvcm1hdF90aW1lKG5ldyBEYXRlKGRhdGExLmxvb3BfZXZlbnRfdGltZSkpCiAgICAgICAgICB0ZW1wLmdldF9sb29wX2V2ZW50X3RpbWUgPSBkYXRhMS5sb29wX2V2ZW50X3RpbWUKICAgICAgICAgIHRlbXAuZ2V0X2xvY2F0aW9uID0gZGF0YTEubG9jYXRpb24KICAgICAgICAgIHRlbXAuZ2V0X2xwID0gZGF0YTEubHAKICAgICAgICAgIHRlbXAuZ2V0X3JlZ2lzdGVyZWQgPSBkYXRhMS5yZWdpc3RlcmVkCiAgICAgICAgICB0ZW1wLmdldF9kaXJlY3Rpb24gPSBkYXRhMS5kaXJlY3Rpb24KICAgICAgICAgIHRlbXAuZ2V0X2NvbnRlbnRzID0gZGF0YTEuY29udGVudHMKICAgICAgICAgIHRlbXAuZ2V0X2ltYWdlX2Rpc3BsYXkgPSB0cnVlCiAgICAgICAgICB0ZW1wLmdldF9pbWFnZV9uYW1lID0gaW1hZ2VfbmFtZQogICAgICAgICAgaWYgKGRhdGExLmRpcmVjdGlvbiA9PT0gImluIikgewogICAgICAgICAgICB0ZW1wLmdldF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgdGVtcC5nZXRfcGFpZF9mZWUgPSAwCiAgICAgICAgICAgIHRlbXAuZ2V0X2ZlZSA9IDAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghZGF0YTEuZGlzY291bnRlZF9mZWUpIHsKICAgICAgICAgICAgICBkYXRhMS5kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGExLmZlZSB8fCBkYXRhMS5mZWUgPT09IDk5OTggfHwgZGF0YTEuZmVlID09PSA5OTk5KSB7CiAgICAgICAgICAgICAgZGF0YTEuZmVlID0gMAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZGF0YTEucGFpZF9mZWUpIHsKICAgICAgICAgICAgICBkYXRhMS5wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZW1wLmdldF9kaXNjb3VudGVkX2ZlZSA9IGRhdGExLmRpc2NvdW50ZWRfZmVlCiAgICAgICAgICAgIHRlbXAuZ2V0X3BhaWRfZmVlID0gZGF0YTEucGFpZF9mZWUKICAgICAgICAgICAgdGVtcC5nZXRfZmVlID0gZGF0YTEuZmVlCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmRhdGFMaXN0LnVuc2hpZnQodGVtcCkKICAgICAgICB9CiAgICAgICAgbGV0IHRvdGFsX3BhcmtpbmdfZmVlID0gMAogICAgICAgIGxldCB0b3RhbF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICBsZXQgdG90YWxfcGFpZF9mZWUgPSAwCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0b3RhbF9wYXJraW5nX2ZlZSArPSBwYXJzZUludCh0aGlzLmRhdGFMaXN0W2ldLmdldF9mZWUsIDEwKQogICAgICAgICAgdG90YWxfZGlzY291bnRlZF9mZWUgKz0gcGFyc2VJbnQoCiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2Rpc2NvdW50ZWRfZmVlLAogICAgICAgICAgICAxMAogICAgICAgICAgKQogICAgICAgICAgdG90YWxfcGFpZF9mZWUgKz0gcGFyc2VJbnQodGhpcy5kYXRhTGlzdFtpXS5nZXRfcGFpZF9mZWUsIDEwKQogICAgICAgIH0KICAgICAgICB0aGlzLnRvdGFsX3BhcmtpbmdfZmVlID0gdG90YWxfcGFya2luZ19mZWUKICAgICAgICB0aGlzLnRvdGFsX2Rpc2NvdW50ZWRfZmVlID0gdG90YWxfZGlzY291bnRlZF9mZWUKICAgICAgICB0aGlzLnRvdGFsX3BhaWRfZmVlID0gdG90YWxfcGFpZF9mZWUKICAgICAgICAvLwljb25zb2xlLmxvZyh0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGgpOyAgICAgIAogICAgICB9IGVsc2UgaWYgKGRhdGExLmtpbmQgPT09ICJnZXRfdmVoaWNsZV9vYmpfbGlzdCIpIHsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCJnZXRfdmVoaWNsZV9vYmpfbGlzdCA6ICIsIGRhdGExKQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YTEuZG9jcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgbGV0IG9iaiA9IGRhdGExLmRvY3NbaV0KICAgICAgICAgIGxldCBpbWFnZV9uYW1lID0KICAgICAgICAgICAgY29uZmlnLmltYWdlX3NyYyArIG9iai5mb2xkZXJfbmFtZSArICIvIiArIG9iai5maWxlbmFtZQogICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCJpbWFnZV9uYW1lIDogIiwgaW1hZ2VfbmFtZSkKICAgICAgICAgIC8vCWNvbnNvbGUubG9nKCJkYXRhTGlzdCA6ICIsIHRoaXMuZGF0YUxpc3QpOwogICAgICAgICAgaWYgKG9iai5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgb2JqLmRpcmVjdGlvbjEgPSAi7J6F7LCoIgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2JqLmRpcmVjdGlvbjEgPSAi7Lac7LCoIgogICAgICAgICAgfQogICAgICAgICAgbGV0IGZsYWcgPSBmYWxzZQogICAgICAgICAgbGV0IHRvdGFsX3BhcmtpbmdfZmVlID0gMAogICAgICAgICAgbGV0IHRvdGFsX2Rpc2NvdW50ZWRfZmVlID0gMAogICAgICAgICAgbGV0IHRvdGFsX3BhaWRfZmVlID0gMAogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5kYXRhTGlzdFtpXS5nZXRfbG9vcF9ldmVudF90aW1lLCB0aGlzLmRhdGFMaXN0W2ldLmdldF9scCk7CiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFMaXN0W2ldLmdldF9sb29wX2V2ZW50X3RpbWUgPT09IG9iai5sb29wX2V2ZW50X3RpbWUpIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBvYmoubHAgIT0gIuuvuOyduOyLnSIgJiYKICAgICAgICAgICAgICAgIG9iai5scC5pbmRleE9mKCJYIikgPCAwICYmCiAgICAgICAgICAgICAgICBvYmoubHAubGVuZ3RoID49IDcKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIC8vIOuTpOyWtOyYqCDssKjrn4nsnbQg66+47J247Iud7J20IOyVhOuLiOuptAogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9scCA9PSAi66+47J247IudIiB8fAogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9scC5pbmRleE9mKCJYIikgPj0gMCB8fAogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9scC5sZW5ndGggPCA3CiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfbHAgPSBvYmoubHAKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfcmVnaXN0ZXJlZCA9IG9iai5yZWdpc3RlcmVkCiAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X2RpcmVjdGlvbiA9IG9iai5kaXJlY3Rpb24KICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfY29udGVudHMgPSBvYmouY29udGVudHMKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfaW1hZ2VfbmFtZSA9IHRydWUKICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfaW1hZ2VfbmFtZSA9IGltYWdlX25hbWUKICAgICAgICAgICAgICAgICAgaWYgKG9iai5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9mZWUgPSAwCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmouZGlzY291bnRlZF9mZWUpIHsKICAgICAgICAgICAgICAgICAgICAgIG9iai5kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhMS5mZWUgfHwgb2JqLmZlZSA9PT0gOTk5OCB8fCBvYmouZmVlID09PSA5OTk5KSB7CiAgICAgICAgICAgICAgICAgICAgICBvYmouZmVlID0gMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIW9iai5wYWlkX2ZlZSkgewogICAgICAgICAgICAgICAgICAgICAgb2JqLnBhaWRfZmVlID0gMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2ldLmdldF9kaXNjb3VudGVkX2ZlZSA9IG9iai5kaXNjb3VudGVkX2ZlZQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaV0uZ2V0X3BhaWRfZmVlID0gb2JqLnBhaWRfZmVlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpXS5nZXRfZmVlID0gb2JqLmZlZQogICAgICAgICAgICAgICAgICAgIHRvdGFsX3BhcmtpbmdfZmVlICs9IHBhcnNlSW50KG9iai5mZWUsIDEwKQogICAgICAgICAgICAgICAgICAgIHRvdGFsX2Rpc2NvdW50ZWRfZmVlICs9IHBhcnNlSW50KG9iai5kaXNjb3VudGVkX2ZlZSwgMTApCiAgICAgICAgICAgICAgICAgICAgdG90YWxfcGFpZF9mZWUgKz0gcGFyc2VJbnQob2JqLnBhaWRfZmVlLCAxMCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmbGFnID0gdHJ1ZQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChmbGFnID09IGZhbHNlKSB7CiAgICAgICAgICAgIGxldCB0ZW1wID0ge30KICAgICAgICAgICAgdGVtcC5nZXRfdGltZSA9IGZvcm1hdF90aW1lKG5ldyBEYXRlKG9iai5sb29wX2V2ZW50X3RpbWUpKQogICAgICAgICAgICB0ZW1wLmdldF9sb29wX2V2ZW50X3RpbWUgPSBvYmoubG9vcF9ldmVudF90aW1lCiAgICAgICAgICAgIHRlbXAuZ2V0X2xvY2F0aW9uID0gb2JqLmxvY2F0aW9uCiAgICAgICAgICAgIHRlbXAuZ2V0X2xwID0gb2JqLmxwCiAgICAgICAgICAgIHRlbXAuZ2V0X3JlZ2lzdGVyZWQgPSBvYmoucmVnaXN0ZXJlZAogICAgICAgICAgICB0ZW1wLmdldF9kaXJlY3Rpb24gPSBvYmouZGlyZWN0aW9uCiAgICAgICAgICAgIHRlbXAuZ2V0X2NvbnRlbnRzID0gb2JqLmNvbnRlbnRzCiAgICAgICAgICAgIHRlbXAuZ2V0X2ltYWdlX2Rpc3BsYXkgPSB0cnVlCiAgICAgICAgICAgIHRlbXAuZ2V0X2ltYWdlX25hbWUgPSBpbWFnZV9uYW1lCiAgICAgICAgICAgIGlmIChkYXRhMS5kaXJlY3Rpb24gPT09ICJpbiIpIHsKICAgICAgICAgICAgICB0ZW1wLmdldF9kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICB0ZW1wLmdldF9wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgICB0ZW1wLmdldF9mZWUgPSAwCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCFvYmouZGlzY291bnRlZF9mZWUpIHsKICAgICAgICAgICAgICAgIG9iai5kaXNjb3VudGVkX2ZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFvYmouZmVlIHx8IG9iai5mZWUgPT09IDk5OTggfHwgb2JqLmZlZSA9PT0gOTk5OSkgewogICAgICAgICAgICAgICAgb2JqLmZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFvYmoucGFpZF9mZWUpIHsKICAgICAgICAgICAgICAgIG9iai5wYWlkX2ZlZSA9IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGVtcC5nZXRfZGlzY291bnRlZF9mZWUgPSBvYmouZGlzY291bnRlZF9mZWUKICAgICAgICAgICAgICB0ZW1wLmdldF9wYWlkX2ZlZSA9IG9iai5wYWlkX2ZlZQogICAgICAgICAgICAgIHRlbXAuZ2V0X2ZlZSA9IG9iai5mZWUKICAgICAgICAgICAgICB0b3RhbF9wYXJraW5nX2ZlZSArPSBwYXJzZUludChvYmouZmVlLCAxMCkKICAgICAgICAgICAgICB0b3RhbF9kaXNjb3VudGVkX2ZlZSArPSBwYXJzZUludChvYmouZGlzY291bnRlZF9mZWUsIDEwKQogICAgICAgICAgICAgIHRvdGFsX3BhaWRfZmVlICs9IHBhcnNlSW50KG9iai5wYWlkX2ZlZSwgMTApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kYXRhTGlzdC51bnNoaWZ0KHRlbXApCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnRvdGFsX3BhcmtpbmdfZmVlICs9IHRvdGFsX3BhcmtpbmdfZmVlCiAgICAgICAgICB0aGlzLnRvdGFsX2Rpc2NvdW50ZWRfZmVlICs9IHRvdGFsX2Rpc2NvdW50ZWRfZmVlCiAgICAgICAgICB0aGlzLnRvdGFsX3BhaWRfZmVlICs9IHRvdGFsX3BhaWRfZmVlCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygKICAgICAgICAgIC8vICAgInRvdGFsX3BhcmtpbmdfZmVlIDoiLAogICAgICAgICAgLy8gICB0b3RhbF9wYXJraW5nX2ZlZSwKICAgICAgICAgIC8vICAgInRvdGFsX2Rpc2NvdW50ZWRfZmVlIDoiLAogICAgICAgICAgLy8gICB0b3RhbF9kaXNjb3VudGVkX2ZlZSwKICAgICAgICAgIC8vICAgInRvdGFsX3BhaWRfZmVlOiAiLAogICAgICAgICAgLy8gICB0b3RhbF9wYWlkX2ZlZQogICAgICAgICAgLy8gKQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLwljb25zb2xlLmxvZyhkYXRhMS5scCwgdGhpcy5jYXJtZXJhX2xpc3RbaV0ubG9jYXRpb24sIGRhdGExLmxvY2F0aW9uKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIG9iai5sb2NhdGlvbiA9PSB0aGlzLmNhcm1lcmFfbGlzdFtpXS5sb2NhdGlvbiAmJgogICAgICAgICAgICAgIG9iai5kaXJlY3Rpb24gPT0gdGhpcy5jYXJtZXJhX2xpc3RbaV0uZGlyZWN0aW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0W2ldLmxwID0gb2JqLmxwCiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3RbaV0uaW1hZ2VfbmFtZSA9IGltYWdlX25hbWUKICAgICAgICAgICAgICBsZXQgdGVtcCA9IHt9CiAgICAgICAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaCh0ZW1wKQogICAgICAgICAgICAgIHRoaXMuY2FybWVyYV9saXN0LnNwbGljZSh0aGlzLmNhcm1lcmFfbGlzdC5sZW5ndGggLSAxLCAxKQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjb250ZW50c19jaGFuZ2UoaW5kZXgpIHsKICAgICAgLy8gY29uc29sZS5sb2coIuuCtOyaqeuzgOqyvSA6IiwgdGhpcy5kYXRhTGlzdFtpbmRleF0pCiAgICAgIHZhciBvYmogPSB7fQogICAgICAvLyBvYmoua2luZCA9ICJ1cGRhdGVfdmVoaWNsZV9vYmpfYXRfdmVoaWNsZV9vYmpfbGlzdCIKICAgICAgb2JqLmtpbmQxID0gInVwZGF0ZV92ZWhpY2xlX29ial9hdF92ZWhpY2xlX29ial9saXN0IgogICAgICBvYmoubHAgPSB0aGlzLmRhdGFMaXN0W2luZGV4XS5nZXRfbHAKICAgICAgb2JqLmxvb3BfZXZlbnRfdGltZSA9IHRoaXMuZGF0YUxpc3RbaW5kZXhdLmdldF9sb29wX2V2ZW50X3RpbWUKICAgICAgb2JqLmNvbnRlbnRzID0gdGhpcy5kYXRhTGlzdFtpbmRleF0uZ2V0X2NvbnRlbnRzCiAgICAgIG9iai5udW1iZXIgPSBvYmoubHAucmVwbGFjZSgvW+qwgC3tnp1dL2dpLCAiIikKICAgICAgdGhpcy5zZW5kTWVzc2FnZShvYmopCiAgICB9LAogICAgdmVoaWNsZV9vYmpfbGlzdF9maW5kKCkgewogICAgICBsZXQgZCA9IG5ldyBEYXRlKCkKICAgICAgLy9sZXQgZDEgPSBkIC0gKDI0KjYwKjYwKjEwMDApOwogICAgICAvL2NvbnNvbGUubG9nKCJkIDogIiwgZCwgIiBkMSA6ICIsIGQxKTsKICAgICAgbGV0IHN0cl9zdGFydCA9CiAgICAgICAgZC5nZXRGdWxsWWVhcigpICsKICAgICAgICAiLSIgKwogICAgICAgIGl0b1N0cihkLmdldE1vbnRoKCkgKyAxKSArCiAgICAgICAgIi0iICsKICAgICAgICBpdG9TdHIoZC5nZXREYXRlKCkpICsKICAgICAgICAiVDAwOjAwIgogICAgICBsZXQgc3RyX2VuZCA9CiAgICAgICAgZC5nZXRGdWxsWWVhcigpICsKICAgICAgICAiLSIgKwogICAgICAgIGl0b1N0cihkLmdldE1vbnRoKCkgKyAxKSArCiAgICAgICAgIi0iICsKICAgICAgICBpdG9TdHIoZC5nZXREYXRlKCkpICsKICAgICAgICAiVDIzOjU5IgogICAgICB0aGlzLnN0YXJ0X3RpbWUgPSBzdHJfc3RhcnQKICAgICAgdGhpcy5lbmRfdGltZSA9IHN0cl9lbmQKICAgICAgbGV0IG9iaiA9IHt9CiAgICAgIG9iai5zdGFydF90aW1lID0gZ2V0X3N0YXJ0X3RpbWUodGhpcy5zdGFydF90aW1lKQogICAgICBvYmouZW5kX3RpbWUgPSBnZXRfZW5kX3RpbWUodGhpcy5lbmRfdGltZSkKICAgICAgb2JqLmtpbmQgPSAiZ2V0X3ZlaGljbGVfb2JqX2xpc3QiCiAgICAgIG9iai5pZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWRtaW5faWQiKQogICAgICBvYmoucHcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oImFkbWluX3B3IikKICAgICAgLy8gY29uc29sZS5sb2coImxwX3NlYXJjaCgpIDogIiwgb2JqKQogICAgICB0aGlzLnNlbmRNZXNzYWdlKG9iaikKICAgIH0sCiAgICBzaWduYWwoYykgewogICAgICBjLmltYWdlX2Rpc3BsYXkgPSAhYy5pbWFnZV9kaXNwbGF5CiAgICB9LAogICAgdG9nZ2xlcygpIHsKICAgICAgdGhpcy50b2dnbGUgPSAhdGhpcy50b2dnbGUKICAgICAgLy8gIGNvbnNvbGUubG9nKHRoaXMudG9nZ2xlKQogICAgfSwKICAgIG9wZW5fcGljdHVyZShkKSB7ICAgICAgCiAgICAgIC8vIGQuZ2V0X2ltYWdlX2Rpc3BsYXkgPSBmYWxzZQogICAgICBkLmdldF9pbWFnZV9kaXNwbGF5ID0gIWQuZ2V0X2ltYWdlX2Rpc3BsYXkKICAgICAKICAgIH0sCiAgICBjbG9zZV9waWN0dXJlKGQpIHsKICAgICAgLy8gIGNvbnNvbGUubG9nKCJjbG9zZV9waWN0dXJlIDogIiwgZC5nZXRfaW1hZ2VfZGlzcGxheSkKICAgICAgLy90aGlzLiRuZXh0VGljayhmdW5jdGlvbigpewogICAgICByZXR1cm4gKGQuZ2V0X2ltYWdlX2Rpc3BsYXkgPSB0cnVlKQogICAgICAvL30pCiAgICB9LAogICAgYmFyX2NvbnRyb2woYykgewogICAgICBsZXQgb2JqID0ge30KICAgICAgb2JqLmtpbmQgPSAiY29udHJvbCIKICAgICAgb2JqLmRpcmVjdGlvbiA9ICJ1cCIKICAgICAgb2JqLmxvY2F0aW9uID0gYy5sb2NhdGlvbgogICAgICAvL2luZGV4ID0gYy5pbmRleAogICAgICAvL2FkbWluX2lkOiAiYWRtaW4wMDEiCiAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uob2JqKQogICAgfSwKICAgIGJhcl9jb250cm9sX2Nsb3NlKGMpIHsKICAgICAgbGV0IG9iaiA9IHt9CiAgICAgIG9iai5raW5kID0gIiIKICAgICAgb2JqLmRpcmVjdGlvbiA9ICIiCiAgICAgIG9iai5sb2NhdGlvbiA9IGMubG9jYXRpb24KICAgICAgLy9pbmRleCA9IGMuaW5kZXgKICAgICAgLy9hZG1pbl9pZDogImFkbWluMDAxIgogICAgICB0aGlzLnNlbmRNZXNzYWdlKG9iaikKICAgIH0sCiAgICBiYXJfbW9kZV9sb2NrKGMpIHsKICAgICAgbGV0IG9iaiA9IHt9CiAgICAgIG9iai5raW5kID0gIm1vZGUiCiAgICAgIG9iai5tb2RlID0gImxvY2siCiAgICAgIG9iai5sb2NhdGlvbiA9IGMubG9jYXRpb24KICAgICAgLy9pbmRleCA9IGMuaW5kZXgKICAgICAgLy9hZG1pbl9pZDogImFkbWluMDAxIgogICAgICB0aGlzLnNlbmRNZXNzYWdlKG9iaikKICAgIH0sCiAgICBiYXJfbW9kZV91bmxvY2soYykgewogICAgICBsZXQgb2JqID0ge30KICAgICAgb2JqLmtpbmQgPSAibW9kZSIKICAgICAgb2JqLm1vZGUgPSAidW5sb2NrIgogICAgICBvYmoubG9jYXRpb24gPSBjLmxvY2F0aW9uCiAgICAgIC8vaW5kZXggPSBjLmluZGV4CiAgICAgIC8vYWRtaW5faWQ6ICJhZG1pbjAwMSIKICAgICAgdGhpcy5zZW5kTWVzc2FnZShvYmopCiAgICB9LAogICAgYmFycmllcl9uYW1lX2NoZWNrKCkgewogICAgICB0aGlzLmNhcm1lcmFfbGlzdCA9IFtdCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmJhcnJpZXJfZGlzcGxheV9saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5jYXJtZXJhX2xpc3QucHVzaChjb25maWcuYmFycmllcl9kaXNwbGF5X2xpc3RbaV0pCiAgICAgIH0KICAgICAgLy8gdGhpcy5iYXJfcG9saWN5X2Z1bl9hbGwoKQogICAgfSwKICAgIHNlbmRNZXNzYWdlKGMpIHsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoIm1lc3NhZ2VfZnJvbV93ZWJfY2xpZW50IiwgYykKICAgIH0sCiAgICBzdGFydCgpIHsKICAgICAgLy9jb25zb2xlLmxvZygic3RhcnQg7ZWo7IiYIOyLnOyekSAiKTsKICAgICAgbGV0IHRoYXQgPSB0aGlzCiAgICAgIGxldCBmbGFnID0gZmFsc2UKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGxldCBkYXRlID0gRGF0ZS5ub3coKQogICAgICAgIGxldCB0ZW1wX2RhdGUgPSBmb3JtYXRfdGltZV9kYXRlKG5ldyBEYXRlKGRhdGUpKS5zcGxpdCgiOiIpCiAgICAgICAgbGV0IHRlbXBfaGggPSBwYXJzZUludCh0ZW1wX2RhdGVbMF0sIDEwKQogICAgICAgIGxldCB0ZW1wX21tID0gcGFyc2VJbnQodGVtcF9kYXRlWzFdLCAxMCkKICAgICAgICBpZiAoZmxhZyA9PT0gZmFsc2UgJiYgdGVtcF9oaCA9PT0gMCAmJiB0ZW1wX21tID09PSAwKSB7CiAgICAgICAgICB0aGF0LmRhdGFMaXN0ID0gW10KICAgICAgICAgIGZsYWcgPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZsYWcgPSBmYWxzZQogICAgICAgIH0KICAgICAgICBpZih0aGF0LmRhdGFMaXN0Lmxlbmd0aCA+IDEwMCl7CiAgICAgICAgICB0aGF0LmRhdGFMaXN0LnNwbGljZSgxMDAsIHRoYXQuZGF0YUxpc3QubGVuZ3RoLTEwMCkKICAgICAgICB9CiAgICAgIH0sMjAgKiAxMDAwKQogICAgICB0aGlzLmJhcl9zdGF0dXNfcXVlcnkoKQogICAgfSwKICAgIGJhcl9zdGF0dXNfcXVlcnkoKSB7CiAgICAgIHZhciBvYmogPSB7fQogICAgICBvYmoua2luZCA9ICJiYXJfc3RhdHVzIgogICAgICBvYmouY29udHJvbF9pZCA9ICJhZG1pbjAwMSIKICAgICAgY29uc29sZS5sb2coImJhcl9zdGF0dXNfcXVlcnkiKQogICAgICB0aGlzLnNlbmRNZXNzYWdlKG9iaikKICAgIH0gICAKICB9Cn0KZnVuY3Rpb24gZ2V0X3N0YXJ0X3RpbWUoc3RyKSB7CiAgdmFyIHJlcyA9IHN0ci5zcGxpdCgvWy1ULjpcc10rLykKICB2YXIgZCA9IG5ldyBEYXRlKAogICAgcGFyc2VJbnQocmVzWzBdKSwKICAgIHBhcnNlSW50KHJlc1sxXSkgLSAxLAogICAgcGFyc2VJbnQocmVzWzJdKSwKICAgIHBhcnNlSW50KHJlc1szXSksCiAgICBwYXJzZUludChyZXNbNF0pLAogICAgMCwKICAgIDAKICApCiAgcmV0dXJuIGQuZ2V0VGltZSgpCn0KCmZ1bmN0aW9uIGdldF9lbmRfdGltZShzdHIpIHsKICB2YXIgcmVzID0gc3RyLnNwbGl0KC9bLVQuOlxzXSsvKQogIHZhciBkID0gbmV3IERhdGUoCiAgICBwYXJzZUludChyZXNbMF0pLAogICAgcGFyc2VJbnQocmVzWzFdKSAtIDEsCiAgICBwYXJzZUludChyZXNbMl0pLAogICAgcGFyc2VJbnQocmVzWzNdKSwKICAgIHBhcnNlSW50KHJlc1s0XSksCiAgICA1OSwKICAgIDk5OQogICkKICByZXR1cm4gZC5nZXRUaW1lKCkKfQovLyBmdW5jdGlvbiBmb3JtYXRfdGltZV9kYXRlKGRhdCkgewovLyAgIHZhciBzdHIgPSAiIgovLyAgIHN0ciArPSBudW1fdG9fc3RyKGRhdC5nZXRIb3VycygpKQovLyAgIHN0ciArPSAiOiIgKyBudW1fdG9fc3RyKGRhdC5nZXRNaW51dGVzKCkpCi8vICAgc3RyICs9ICI6IiArIG51bV90b19zdHIoZGF0LmdldFNlY29uZHMoKSkKLy8gICByZXR1cm4gc3RyCi8vIH0KCmZ1bmN0aW9uIG51bV90b19zdHIoJG51bSkgewogICRudW0gPCAxMCA/ICgkbnVtID0gIjAiICsgJG51bSkgOiAkbnVtCiAgcmV0dXJuICRudW0udG9TdHJpbmcoKQp9CmZ1bmN0aW9uIGZvcm1hdF90aW1lX2RhdGUoZGF0KSB7CiAgdmFyIHN0ciA9ICIiCiAgc3RyICs9IG51bV90b19zdHIoZGF0LmdldEhvdXJzKCkpCiAgc3RyICs9ICI6IiArIG51bV90b19zdHIoZGF0LmdldE1pbnV0ZXMoKSkKICBzdHIgKz0gIjoiICsgbnVtX3RvX3N0cihkYXQuZ2V0U2Vjb25kcygpKQogIHJldHVybiBzdHIKfQpmdW5jdGlvbiBpdG9TdHIoJG51bSkgewogICRudW0gPCAxMCA/ICgkbnVtID0gIjAiICsgJG51bSkgOiAkbnVtCiAgcmV0dXJuICRudW0udG9TdHJpbmcoKQp9CmZ1bmN0aW9uIGZvcm1hdF90aW1lKGRhdCkgewogIHZhciBzdHIgPSAiIgogIHN0ciArPSBkYXQuZ2V0RnVsbFllYXIoKQogIHN0ciArPSAiLiIgKyBudW1fdG9fc3RyKGRhdC5nZXRNb250aCgpICsgMSkKICBzdHIgKz0gIi4iICsgbnVtX3RvX3N0cihkYXQuZ2V0RGF0ZSgpKQogIHN0ciArPSAiLiAiICsgbnVtX3RvX3N0cihkYXQuZ2V0SG91cnMoKSkKICBzdHIgKz0gIjoiICsgbnVtX3RvX3N0cihkYXQuZ2V0TWludXRlcygpKQogIHN0ciArPSAiOiIgKyBudW1fdG9fc3RyKGRhdC5nZXRTZWNvbmRzKCkpCiAgcmV0dXJuIHN0cgp9Cg=="},{"version":3,"sources":["vehicleEntryExitLive.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vehicleEntryExitLive.vue","sourceRoot":"src/components/operatingFunc","sourcesContent":["<template>\n <div class=\"vehicle_wrap report_wrap\">\n   <div class=\"title\">\n      <h2>{{mainTitle[1].subMenu[0].title}}</h2>\n    </div>\n   <div class=\"present_condition_view\">      \n      <ul>\n        <li\n          v-for=\"(c, index) in carmera_list\"\n          :key=\"index\"\n          :class=\"{ active: c.image_display, cut: c.nosignal }\"\n          class=\"carmera_lists\"\n        >\n          <div class=\"strapline\">\n            <dl>\n              <dt><input type=\"text\" :value=\"c.location\" /></dt>\n              <dd v-if=\"c.nosignal === true\">\n                <font-awesome-icon icon=\"exclamation-triangle\" />\n              </dd>\n              <dd><input type=\"text\" :value=\"c.direction\" /></dd>\n            </dl>\n          </div>\n          <div class=\"state_body_wrp\">\n            <ul class=\"state_body\">\n              <li :class=\"{ active: toggle, openfix:c.openfix }\" @click=\"toggles()\">\n                <div class=\"img_record\">                  \n                  <img :src=\"c.image_name\" alt=\"\"  @click=\"submitForm(c)\" />                 \n                  <span class=\"open\">열림</span>\n                  <span class=\"fixing\"\n                    ><font-awesome-icon icon=\"lock\" />고정</span\n                  >\n                </div>\n                <p>차량번호 : {{ c.lp }}</p>\n              </li>\n            </ul>\n            <div class=\"bt_control_wrap\">\n            <div class=\"bar_control\" v-if=\"c.barrier_control_display\">\n              <button class=\"button_open\" @click=\"bar_control(c)\">열림</button>\n              <button class=\"button_close\" @click=\"bar_control_close(c)\">닫힘</button>\n              <form>\n                <label>\n                  <input type=\"radio\" @click=\"bar_mode_lock(c)\" name=\"lock\" />\n                  <span><font-awesome-icon icon=\"lock\" />개방</span>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    @click=\"bar_mode_unlock(c)\"\n                    name=\"lock\"\n                    checked\n                  /><span> <font-awesome-icon icon=\"lock-open\" />해제</span>\n                </label>\n              </form>\n            </div>\n            <div class=\"bar_control\" v-else></div>         \n            </div>\n          </div>        \n        </li>\n      </ul>\n    </div>\n    <div class=\"record_wrap\">\n      <div class=\"menu_title\">\n        <div class=\"counting\">\n          <h2>출입한 차량들 목록</h2>\n\n          <span> 주차요금 : {{ total_parking_fee | currency }}원, </span>\n         <!-- <span> 할인금액 : {{ total_discounted_fee | currency }}원, </span> -->\n          <span> 정산금액 : {{ total_paid_fee | currency }}원 </span>\n          <span\n            ><font-awesome-icon icon=\"sign-out-alt\" />출차수:{{\n              count_out\n            }}건</span\n          >\n          <span\n            ><font-awesome-icon icon=\"sign-in-alt\" />입차수:{{\n              count_in\n            }}건</span\n          >\n        </div>\n      </div>\n      <div class=\"list_data\">\n        <table class=\"list_data_table\">\n          <thead>\n            <tr class=\"tableTitle\" colspan=\"11\">\n              <th class=\"number\">번호</th>\n              <th>차량번호</th>\n              <th>차량출입시각</th>\n              <th>장소</th>\n              <th>방향</th>\n              <th>주차요금</th>\n              <th>정산금액</th>\n              <th>구분</th>\n              <th>메모</th>\n              <th :class=\"{add:Object.keys(this.dataList).length > 8}\">사진</th>\n            </tr>\n          </thead>\n          <tbody class=\"scrolltBody \">\n            <tr v-for=\"(d, index) in dataList\" :key=\"index\">\n              <td colspan=\"11\">\n                <table>\n                  <!-- <tr @click.prevent=\"open_picture(d)\"> -->\n                  <tr>\n                    <td class=\"number\">{{ index + 1 }}</td>\n                    <td>\n                      <input\n                        type=\"text\"\n                        v-model=\"d.get_lp\"\n                        v-on:change=\"contents_change(index)\"\n                      />\n                    </td>\n                    <td>{{ d.get_time }}</td>\n                    <td>{{ d.get_location }}</td>\n                    <td>{{ d.get_direction }}</td>\n                    <td>{{ d.get_fee }}</td>\n                    <td>{{ d.get_paid_fee }}</td>\n                    <td>{{ d.get_registered }}</td>                    \n                   <td>\n                      <input\n                        type=\"text\"\n                        v-model=\"d.get_contents\"\n                        v-on:change=\"contents_change(index)\"\n                      />\n                    </td>\n\n                    <td>\n                      <button\n                        v-if=\"d.get_image_display\"\n                        @click.prevent=\"open_picture(d)\"\n                      >\n                        <!-- <font-awesome-icon icon=\"eye\" /> -->\n                        <font-awesome-icon\n                          icon=\"camera-retro\"\n                          style=\"color:#fff\"\n                        />\n                        <!-- 보기<font-awesome-icon icon=\"angle-down\" /> -->\n                      </button>\n                      <button v-else @click=\"close_picture(d)\">\n                        <font-awesome-icon\n                          icon=\"camera-retro\"\n                          style=\"color:#26a95e\"\n                        />\n                        <!-- 닫기<font-awesome-icon icon=\"angle-up\" /> -->\n                      </button>\n                    </td>\n                  <tr v-if=\"d.get_image_display === false\" @click=\"close_picture(d)\">\n                    <td colspan=\"11\" class=\"tdImg\">\n                      <div>\n                        <img :src=\"d.get_image_name\" alt=\"\" />\n                        <span>\n                          {{ d.get_location }}-{{ d.get_direction }}방향</span\n                        >\n                      </div>\n                    </td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n </div>\n</template>\n<script>\nimport config from \"../../config.js\"\nimport { mapState } from \"vuex\"\nexport default {\n  data: function() {\n    return {\n      \n      dataList: [{get_time:\"\",get_location:\"\",get_direction:\"\",get_lp:\"\",get_fee:0,get_paid_fee:0,get_registered:\"\",get_contents:\"\"}],\n      carmera_list: [   {\n      kind_bar_status: \"barrier_status\",\n      kind_bar_policy: \"bar_ploicy\",\n      status: \"down\",\n      location: \"정문입구\",\n      direction: \"in\",\n      lp: \"123가4567\",\n      image_display: false,\n      barrier_control_display: true,\n      barrier_policy_name: \"barrier_policy1\",\n      image_name: require(\"../../assets/car_test1.jpg\"),\n      checkedNames: \"all_vehicle\"\n    },\n    {\n      kind: \"barrier_status\",\n      status: \"down\",\n      location: \"정문출구\",\n      direction: \"out\",\n      lp: \"546가1517\",\n      image_display: false,\n      barrier_control_display: true,\n      barrier_policy_name: \"barrier_policy2\",\n      image_name: require(\"../../assets/car_test2.jpg\"),\n      checkedNames: \"registered_vehicle\"     \n    }],\n      start_time: new Date(),\n      end_time: new Date(),\n      total_parking_fee: 0,\n      total_discounted_fee: 0,\n      total_paid_fee: 0,\n      toggle: false,\n      openfix: false,\n      nosignal: false,\n      list_items: {\n        time: \"현재시간\",\n        loop_event_time: \"pc시간\",\n        location: \"1구역\",\n        direction: \"In\",\n        lp: \"123가4567\",\n        resistered: \"등록차량\",\n        dong_ho: \"101동\",\n        image_display: false,\n        image_name: require(\"../../assets/car_test4.jpg\")\n      },\n      checked: [],\n      button_value: [\n        { name: \"개방\", checked: true },\n        { name: \"풀림\", checked: false }\n      ]\n    }\n  },\n  filters: {\n    currency: function(value) {\n      var num = new Number(value)\n      return num.toFixed(0).replace(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g, \"$1,\")\n    }\n  },\n  computed: {\n     ...mapState([\"mainTitle\"]),\n    count_in() {\n      let count = 0\n      this.dataList.forEach(cot => {\n        if (cot.get_direction === \"in\") count++\n      })\n      return count\n    },\n    count_out() {\n      let count = 0\n      this.dataList.forEach(cot => {\n        if (cot.get_direction === \"out\") count++\n      })\n      return count\n    }\n  },\n  created() {\n    this.$socket.on(\"message_from_server\", data => {         \n      this.lpr_process(data)\n    }),\n      this.barrier_name_check(),\n      // this.barrier_policy_query(),\n      //this.bar_status_query(),\n      this.start(),\n      this.vehicle_obj_list_find()\n  },\n  methods: {\n    submitForm(event) {\n      const frm = document.createElement('form')\n      frm.setAttribute('id', 'img')\n      frm.setAttribute('action', event.image_name)\n      frm.setAttribute('method', 'get')\n      frm.setAttribute('target', 'img')\n      document.body.appendChild(frm)\n      window.open(\n        'about:blank',\n        'img',\n        'width=' +\n    parseInt(window.innerWidth) * 1 +\n    ',height=' +\n    parseInt(window.innerHeight) * 1 +\n    ',toolbar=0,menubar=0,location=0,status=0,scrollbars=1,resizable=0,left=0,top=0'\n      )\n      \n      frm.submit()\n    },\n    lpr_process(data1) {\n      if (data1.kind === \"barrier_status\") {\n        console.log(\"barrier_status\", data1)\n        for (let i = 0; i < this.carmera_list.length; i++) {\n          if (data1.location == this.carmera_list[i].location) {\n            if (data1.status === \"down\" || data1.status === \"DOWN\") {\n              this.carmera_list[i].image_display = false\n              let temp = {}\n              this.carmera_list.push(temp)\n              this.carmera_list.splice(this.carmera_list.length - 1, 1)\n            } else {\n              this.carmera_list[i].image_display = true\n              let temp = {}\n              this.carmera_list.push(temp)\n              this.carmera_list.splice(this.carmera_list.length - 1, 1)\n            }\n          }\n        }\n      } else if (data1.kind === \"bar_mode\") {\n        console.log(\"bar_mode\", data1)\n        for (let j = 0; j < data1.docs.length; j++) {\n          let bar_mode = data1.docs[j]\n          for (let i = 0; i < this.carmera_list.length; i++) {\n            if (\n              bar_mode.location === this.carmera_list[i].location &&  bar_mode.direction === this.carmera_list[i].direction\n            ) {\n              \n              if (bar_mode.mode === \"lock\") {\n                this.carmera_list[i].openfix = true\n                let temp = {}\n                this.carmera_list.push(temp)\n                this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              } else {\n                this.carmera_list[i].openfix = false\n                let temp = {}\n                this.carmera_list.push(temp)\n                this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              }\n              break\n            }\n          }\n        }\n      } else if (data1.kind === \"bar_status\") {\n        console.log(\"bar_status\", data1)\n        for (let j = 0; j < data1.docs.length; j++) {\n          let bar_status = data1.docs[j]\n          for (let i = 0; i < this.carmera_list.length; i++) {\n            if (\n              bar_status.location === this.carmera_list[i].location &&\n              bar_status.direction == this.carmera_list[i].direction\n            ) {\n              if (data1.status === \"down\" || data1.status === \"DOWN\") {\n                this.carmera_list[i].image_display = false\n                let temp = {}\n                this.carmera_list.push(temp)\n                this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              } else if (data1.status === \"up\" || data1.status === \"UP\"){\n                this.carmera_list[i].image_display = true\n                let temp = {}\n                this.carmera_list.push(temp)\n                this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              }\n              break\n            }\n          }\n        }\n      } else if (data1.kind === \"socket_error\") {\n        //  console.log(\"socket error : \", data1)\n        for (let i = 0; i < this.carmera_list.length; i++) {\n          if (\n            data1.location === this.carmera_list[i].location &&\n            data1.direction === this.carmera_list[i].direction\n          ) {\n            this.carmera_list[i].nosignal = true\n            let temp = {}\n            this.carmera_list.push(temp)\n            this.carmera_list.splice(this.carmera_list.length - 1, 1)\n            //console.log(\"보낼값\", this.carmera_list[0].status)\n          }\n        }\n      } else if (data1.kind === \"weekly_barrier_policy\") {\n        for (let i = 0; i < this.carmera_list.length; i++) {\n          if (\n            data1.location === this.carmera_list[i].location &&\n            data1.direction === this.carmera_list[i].direction\n          ) {\n            if (data1.barrier_policy === \"개방\") {\n              this.carmera_list[i].checkedNames = \"all_vehicle\"\n              let temp = {}\n              this.carmera_list.push(temp)\n              this.carmera_list.splice(this.carmera_list.length - 1, 1)\n            } else {\n              for (let j = 0; j < config.barrier_display_list.length; j++) {\n                if (\n                  data1.location === config.barrier_display_list[j].location &&\n                  data1.direction === config.barrier_display_list[j].direction\n                ) {\n                  this.carmera_list[i].checkedNames =\n                    config.barrier_display_list[j].checkedNames\n                  let temp = {}\n                  this.carmera_list.push(temp)\n                  this.carmera_list.splice(this.carmera_list.length - 1, 1)\n                }\n              }\n            }\n          }\n        }\n      } else if (data1.kind === \"socket_normal\") {\n        // console.log(\"socket normal : \", data1)\n        for (let i = 0; i < this.carmera_list.length; i++) {\n          if (\n            data1.location === this.carmera_list[i].location &&\n            data1.direction === this.carmera_list[i].direction\n          ) {\n            this.carmera_list[i].nosignal = false\n            let temp = {}\n            this.carmera_list.push(temp)\n            this.carmera_list.splice(this.carmera_list.length - 1, 1)\n            //console.log(\"보낼값\", this.carmera_list[0].status)\n          }\n        }\n      } else if (data1.kind == \"lpr\") {\n        console.log(data1.kind, data1)\n        //var image_name = \"localhost:7200/images/\"+data1.folder_name+\"/\"+data1.filename\n        let image_name =\n          config.image_src + data1.folder_name + \"/\" + data1.filename\n        // console.log(\"image_name : \", image_name)\n        //\tconsole.log(\"dataList : \", this.dataList);\n        if (data1.direction === \"in\") {\n          data1.direction1 = \"in\"\n        } else {\n          data1.direction1 = \"out\"\n        }\n        let flag = false\n        for (let i = 0; i < this.dataList.length; i++) {\n          //console.log(this.dataList[i].get_loop_event_time, this.dataList[i].get_lp);\n          if (this.dataList[i].get_loop_event_time === data1.loop_event_time) {\n            if (data1.lp != \"미인식\") {\n              // 들어온 차량이 미인식이 아니면\n              if (this.dataList[i].get_lp === \"미인식\") {\n                this.dataList[i].get_lp = data1.lp\n                this.dataList[i].get_registered = data1.registered\n                this.dataList[i].get_direction = data1.direction1\n                this.dataList[i].get_contents = data1.contents\n                this.dataList[i].get_image_name = true\n                this.dataList[i].get_image_name = image_name\n                if (data1.direction === \"in\") {\n                  this.dataList[i].get_discounted_fee = 0\n                  this.dataList[i].get_paid_fee = 0\n                  this.dataList[i].get_fee = 0\n                } else {\n                  if (!data1.discounted_fee) {\n                    data1.discounted_fee = 0\n                  }\n                  if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n                    data1.fee = 0\n                  }\n                  if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n                    data1.paid_fee = 0\n                  }\n                  console.log(\"flag === true :\", data1)\n                  this.dataList[i].get_discounted_fee = parseInt(\n                    data1.discounted_fee,\n                    10\n                  )\n                  this.dataList[i].get_paid_fee = parseInt(data1.paid_fee, 10)\n                  this.dataList[i].get_fee = parseInt(data1.fee, 10)\n                }\n                for (let i = 0; i < this.carmera_list.length; i++) {\n                  //\tconsole.log(data1.lp, this.carmera_list[i].location, data1.location);\n                  if (data1.location === this.carmera_list[i].location && data1.direction === this.carmera_list[i].direction) {\n                    this.carmera_list[i].lp = data1.lp\n                    this.carmera_list[i].image_name = image_name\n                    let temp = {}\n                    this.carmera_list.push(temp)\n                    this.carmera_list.splice(this.carmera_list.length - 1, 1)\n                    break\n                  }\n                }\n              }\n            }\n            flag = true\n            break\n          }\n        }\n        if (flag == false) {\n          let temp = {}\n          temp.get_time = format_time(new Date(data1.loop_event_time))\n          temp.get_loop_event_time = data1.loop_event_time\n          temp.get_location = data1.location\n          temp.get_lp = data1.lp\n          temp.get_registered = data1.registered\n          temp.get_direction = data1.direction1\n          temp.get_contents = data1.contents\n          temp.get_image_display = true\n          temp.get_image_name = image_name\n          if (data1.direction === \"in\") {\n            temp.get_discounted_fee = 0\n            temp.get_paid_fee = 0\n            temp.get_fee = 0\n          } else {\n            if (!data1.discounted_fee) {\n              data1.discounted_fee = 0\n            }\n            if (!data1.fee) {\n              data1.fee = 0\n            }\n            if (!data1.paid_fee) {\n              data1.paid_fee = 0\n            }\n            temp.get_discounted_fee = parseInt(data1.discounted_fee, 10)\n            temp.get_paid_fee = parseInt(data1.paid_fee, 10)\n            temp.get_fee = parseInt(data1.fee, 10)\n            console.log(\"flag === false : \", data1)\n          }\n          this.dataList.unshift(temp)\n          for (let i = 0; i < this.carmera_list.length; i++) {\n            //\tconsole.log(data1.lp, this.carmera_list[i].location, data1.location);\n            if (data1.location === this.carmera_list[i].location && data1.direction === this.carmera_list[i].direction) {\n              this.carmera_list[i].lp = data1.lp\n              this.carmera_list[i].image_name = image_name\n              let temp = {}\n              this.carmera_list.push(temp)\n              this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              break\n            }\n          }\n        }\n        let total_parking_fee = 0\n        let total_discounted_fee = 0\n        let total_paid_fee = 0\n        for (let i = 0; i < this.dataList.length; i++) {\n          total_parking_fee += parseInt(this.dataList[i].get_fee, 10)\n          total_discounted_fee += parseInt(\n            this.dataList[i].get_discounted_fee,\n            10\n          )\n          total_paid_fee += parseInt(this.dataList[i].get_paid_fee, 10)\n        }\n        this.total_parking_fee = total_parking_fee\n        this.total_discounted_fee = total_discounted_fee\n        this.total_paid_fee = total_paid_fee\n        //\tconsole.log(this.carmera_list.length);\n      } else if (data1.kind == \"fee_calculation_result\") {\n        console.log(data1.kind, data1)\n        //var image_name = \"localhost:7200/images/\"+data1.folder_name+\"/\"+data1.filename\n        let image_name =\n          config.image_src + data1.folder_name + \"/\" + data1.filename\n        // console.log(\"image_name : \", image_name)\n        //\tconsole.log(\"dataList : \", this.dataList);\n        if (data1.direction === \"in\") {\n          data1.direction1 = \"입차\"\n        } else {\n          data1.direction1 = \"출차\"\n        }\n        let flag = false\n        for (let i = 0; i < this.dataList.length; i++) {\n          //console.log(this.dataList[i].get_loop_event_time, this.dataList[i].get_lp);\n          if (this.dataList[i].get_loop_event_time === data1.loop_event_time) {\n            this.dataList[i].get_lp = data1.lp\n            this.dataList[i].get_registered = data1.registered\n            this.dataList[i].get_direction = data1.direction\n            this.dataList[i].get_contents = data1.contents\n            this.dataList[i].get_image_name = true\n            this.dataList[i].get_image_name = image_name\n            if (data1.direction === \"in\") {\n              this.dataList[i].get_discounted_fee = 0\n              this.dataList[i].get_paid_fee = 0\n              this.dataList[i].get_fee = 0\n            } else {\n              if (!data1.discounted_fee) {\n                data1.discounted_fee = 0\n              }\n              if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n                data1.fee = 0\n              }\n              if (!data1.paid_fee) {\n                data1.paid_fee = 0\n              }\n              this.dataList[i].get_discounted_fee = parseInt(\n                data1.discounted_fee,\n                10\n              )\n              this.dataList[i].get_paid_fee = parseInt(data1.paid_fee, 10)\n              this.dataList[i].get_fee = parseInt(data1.fee, 10)\n            }\n            flag = true\n            break\n          }\n        }\n        if (flag == false) {\n          let temp = {}\n          temp.get_time = format_time(new Date(data1.loop_event_time))\n          temp.get_loop_event_time = data1.loop_event_time\n          temp.get_location = data1.location\n          temp.get_lp = data1.lp\n          temp.get_registered = data1.registered\n          temp.get_direction = data1.direction\n          temp.get_contents = data1.contents\n          temp.get_image_display = true\n          temp.get_image_name = image_name\n          if (data1.direction === \"in\") {\n            temp.get_discounted_fee = 0\n            temp.get_paid_fee = 0\n            temp.get_fee = 0\n          } else {\n            if (!data1.discounted_fee) {\n              data1.discounted_fee = 0\n            }\n            if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n              data1.fee = 0\n            }\n            if (!data1.paid_fee) {\n              data1.paid_fee = 0\n            }\n            temp.get_discounted_fee = data1.discounted_fee\n            temp.get_paid_fee = data1.paid_fee\n            temp.get_fee = data1.fee\n          }\n          this.dataList.unshift(temp)\n        }\n        let total_parking_fee = 0\n        let total_discounted_fee = 0\n        let total_paid_fee = 0\n        for (let i = 0; i < this.dataList.length; i++) {\n          total_parking_fee += parseInt(this.dataList[i].get_fee, 10)\n          total_discounted_fee += parseInt(\n            this.dataList[i].get_discounted_fee,\n            10\n          )\n          total_paid_fee += parseInt(this.dataList[i].get_paid_fee, 10)\n        }\n        this.total_parking_fee = total_parking_fee\n        this.total_discounted_fee = total_discounted_fee\n        this.total_paid_fee = total_paid_fee\n        //\tconsole.log(this.carmera_list.length);\n      } else if (data1.kind == \"lpr_payment\") {\n          console.log(data1.kind, data1)\n        //var image_name = \"localhost:7200/images/\"+data1.folder_name+\"/\"+data1.filename\n        let image_name =\n          config.image_src + data1.folder_name + \"/\" + data1.filename\n        //  console.log(\"image_name : \", image_name)\n        //\tconsole.log(\"dataList : \", this.dataList);\n        if (data1.direction === \"in\") {\n          data1.direction1 = \"in\"\n        } else {\n          data1.direction1 = \"out\"\n        }\n        let flag = false\n        for (let i = 0; i < this.dataList.length; i++) {\n          //console.log(this.dataList[i].get_loop_event_time, this.dataList[i].get_lp);\n          if (this.dataList[i].get_loop_event_time === data1.loop_event_time) {\n            this.dataList[i].get_lp = data1.lp\n            this.dataList[i].get_registered = data1.registered\n            this.dataList[i].get_direction = data1.direction\n            this.dataList[i].get_contents = data1.contents\n            this.dataList[i].get_image_name = true\n            this.dataList[i].get_image_name = image_name\n            if (data1.direction === \"in\") {\n              this.dataList[i].get_discounted_fee = 0\n              this.dataList[i].get_paid_fee = 0\n              this.dataList[i].get_fee = 0\n            } else {\n              if (!data1.discounted_fee) {\n                data1.discounted_fee = 0\n              }\n              if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n                data1.fee = 0\n              }\n              if (!data1.paid_fee) {\n                data1.paid_fee = 0\n              }\n              this.dataList[i].get_discounted_fee = data1.discounted_fee\n              this.dataList[i].get_paid_fee = data1.paid_fee\n              this.dataList[i].get_fee = data1.fee\n            }\n            flag = true\n            break\n          }\n        }\n        if (flag == false) {\n          let temp = {}\n          temp.get_time = format_time(new Date(data1.loop_event_time))\n          temp.get_loop_event_time = data1.loop_event_time\n          temp.get_location = data1.location\n          temp.get_lp = data1.lp\n          temp.get_registered = data1.registered\n          temp.get_direction = data1.direction\n          temp.get_contents = data1.contents\n          temp.get_image_display = true\n          temp.get_image_name = image_name\n          if (data1.direction === \"in\") {\n            temp.get_discounted_fee = 0\n            temp.get_paid_fee = 0\n            temp.get_fee = 0\n          } else {\n            if (!data1.discounted_fee) {\n              data1.discounted_fee = 0\n            }\n            if (!data1.fee || data1.fee === 9998 || data1.fee === 9999) {\n              data1.fee = 0\n            }\n            if (!data1.paid_fee) {\n              data1.paid_fee = 0\n            }\n            temp.get_discounted_fee = data1.discounted_fee\n            temp.get_paid_fee = data1.paid_fee\n            temp.get_fee = data1.fee\n          }\n          this.dataList.unshift(temp)\n        }\n        let total_parking_fee = 0\n        let total_discounted_fee = 0\n        let total_paid_fee = 0\n        for (let i = 0; i < this.dataList.length; i++) {\n          total_parking_fee += parseInt(this.dataList[i].get_fee, 10)\n          total_discounted_fee += parseInt(\n            this.dataList[i].get_discounted_fee,\n            10\n          )\n          total_paid_fee += parseInt(this.dataList[i].get_paid_fee, 10)\n        }\n        this.total_parking_fee = total_parking_fee\n        this.total_discounted_fee = total_discounted_fee\n        this.total_paid_fee = total_paid_fee\n        //\tconsole.log(this.carmera_list.length);      \n      } else if (data1.kind === \"get_vehicle_obj_list\") {\n        //   console.log(\"get_vehicle_obj_list : \", data1)\n        for (let i = 0; i < data1.docs.length; i++) {\n          let obj = data1.docs[i]\n          let image_name =\n            config.image_src + obj.folder_name + \"/\" + obj.filename\n          //  console.log(\"image_name : \", image_name)\n          //\tconsole.log(\"dataList : \", this.dataList);\n          if (obj.direction === \"in\") {\n            obj.direction1 = \"입차\"\n          } else {\n            obj.direction1 = \"출차\"\n          }\n          let flag = false\n          let total_parking_fee = 0\n          let total_discounted_fee = 0\n          let total_paid_fee = 0\n          for (let i = 0; i < this.dataList.length; i++) {\n            //console.log(this.dataList[i].get_loop_event_time, this.dataList[i].get_lp);\n            if (this.dataList[i].get_loop_event_time === obj.loop_event_time) {\n              if (\n                obj.lp != \"미인식\" &&\n                obj.lp.indexOf(\"X\") < 0 &&\n                obj.lp.length >= 7\n              ) {\n                // 들어온 차량이 미인식이 아니면\n                if (\n                  this.dataList[i].get_lp == \"미인식\" ||\n                  this.dataList[i].get_lp.indexOf(\"X\") >= 0 ||\n                  this.dataList[i].get_lp.length < 7\n                ) {\n                  this.dataList[i].get_lp = obj.lp\n                  this.dataList[i].get_registered = obj.registered\n                  this.dataList[i].get_direction = obj.direction\n                  this.dataList[i].get_contents = obj.contents\n                  this.dataList[i].get_image_name = true\n                  this.dataList[i].get_image_name = image_name\n                  if (obj.direction === \"in\") {\n                    this.dataList[i].get_discounted_fee = 0\n                    this.dataList[i].get_paid_fee = 0\n                    this.dataList[i].get_fee = 0\n                  } else {\n                    if (!obj.discounted_fee) {\n                      obj.discounted_fee = 0\n                    }\n                    if (!data1.fee || obj.fee === 9998 || obj.fee === 9999) {\n                      obj.fee = 0\n                    }\n                    if (!obj.paid_fee) {\n                      obj.paid_fee = 0\n                    }\n                    this.dataList[i].get_discounted_fee = obj.discounted_fee\n                    this.dataList[i].get_paid_fee = obj.paid_fee\n                    this.dataList[i].get_fee = obj.fee\n                    total_parking_fee += parseInt(obj.fee, 10)\n                    total_discounted_fee += parseInt(obj.discounted_fee, 10)\n                    total_paid_fee += parseInt(obj.paid_fee, 10)\n                  }\n                }\n              }\n              flag = true\n              break\n            }\n          }\n          if (flag == false) {\n            let temp = {}\n            temp.get_time = format_time(new Date(obj.loop_event_time))\n            temp.get_loop_event_time = obj.loop_event_time\n            temp.get_location = obj.location\n            temp.get_lp = obj.lp\n            temp.get_registered = obj.registered\n            temp.get_direction = obj.direction\n            temp.get_contents = obj.contents\n            temp.get_image_display = true\n            temp.get_image_name = image_name\n            if (data1.direction === \"in\") {\n              temp.get_discounted_fee = 0\n              temp.get_paid_fee = 0\n              temp.get_fee = 0\n            } else {\n              if (!obj.discounted_fee) {\n                obj.discounted_fee = 0\n              }\n              if (!obj.fee || obj.fee === 9998 || obj.fee === 9999) {\n                obj.fee = 0\n              }\n              if (!obj.paid_fee) {\n                obj.paid_fee = 0\n              }\n              temp.get_discounted_fee = obj.discounted_fee\n              temp.get_paid_fee = obj.paid_fee\n              temp.get_fee = obj.fee\n              total_parking_fee += parseInt(obj.fee, 10)\n              total_discounted_fee += parseInt(obj.discounted_fee, 10)\n              total_paid_fee += parseInt(obj.paid_fee, 10)\n            }\n            this.dataList.unshift(temp)\n          }\n          this.total_parking_fee += total_parking_fee\n          this.total_discounted_fee += total_discounted_fee\n          this.total_paid_fee += total_paid_fee\n          // console.log(\n          //   \"total_parking_fee :\",\n          //   total_parking_fee,\n          //   \"total_discounted_fee :\",\n          //   total_discounted_fee,\n          //   \"total_paid_fee: \",\n          //   total_paid_fee\n          // )\n          for (let i = 0; i < this.carmera_list.length; i++) {\n            //\tconsole.log(data1.lp, this.carmera_list[i].location, data1.location);\n            if (\n              obj.location == this.carmera_list[i].location &&\n              obj.direction == this.carmera_list[i].direction\n            ) {\n              this.carmera_list[i].lp = obj.lp\n              this.carmera_list[i].image_name = image_name\n              let temp = {}\n              this.carmera_list.push(temp)\n              this.carmera_list.splice(this.carmera_list.length - 1, 1)\n              break\n            }\n          }\n        }\n      }\n    },\n    contents_change(index) {\n      // console.log(\"내용변경 :\", this.dataList[index])\n      var obj = {}\n      // obj.kind = \"update_vehicle_obj_at_vehicle_obj_list\"\n      obj.kind1 = \"update_vehicle_obj_at_vehicle_obj_list\"\n      obj.lp = this.dataList[index].get_lp\n      obj.loop_event_time = this.dataList[index].get_loop_event_time\n      obj.contents = this.dataList[index].get_contents\n      obj.number = obj.lp.replace(/[가-힝]/gi, \"\")\n      this.sendMessage(obj)\n    },\n    vehicle_obj_list_find() {\n      let d = new Date()\n      //let d1 = d - (24*60*60*1000);\n      //console.log(\"d : \", d, \" d1 : \", d1);\n      let str_start =\n        d.getFullYear() +\n        \"-\" +\n        itoStr(d.getMonth() + 1) +\n        \"-\" +\n        itoStr(d.getDate()) +\n        \"T00:00\"\n      let str_end =\n        d.getFullYear() +\n        \"-\" +\n        itoStr(d.getMonth() + 1) +\n        \"-\" +\n        itoStr(d.getDate()) +\n        \"T23:59\"\n      this.start_time = str_start\n      this.end_time = str_end\n      let obj = {}\n      obj.start_time = get_start_time(this.start_time)\n      obj.end_time = get_end_time(this.end_time)\n      obj.kind = \"get_vehicle_obj_list\"\n      obj.id = window.localStorage.getItem(\"admin_id\")\n      obj.pw = window.localStorage.getItem(\"admin_pw\")\n      // console.log(\"lp_search() : \", obj)\n      this.sendMessage(obj)\n    },\n    signal(c) {\n      c.image_display = !c.image_display\n    },\n    toggles() {\n      this.toggle = !this.toggle\n      //  console.log(this.toggle)\n    },\n    open_picture(d) {      \n      // d.get_image_display = false\n      d.get_image_display = !d.get_image_display\n     \n    },\n    close_picture(d) {\n      //  console.log(\"close_picture : \", d.get_image_display)\n      //this.$nextTick(function(){\n      return (d.get_image_display = true)\n      //})\n    },\n    bar_control(c) {\n      let obj = {}\n      obj.kind = \"control\"\n      obj.direction = \"up\"\n      obj.location = c.location\n      //index = c.index\n      //admin_id: \"admin001\"\n      this.sendMessage(obj)\n    },\n    bar_control_close(c) {\n      let obj = {}\n      obj.kind = \"\"\n      obj.direction = \"\"\n      obj.location = c.location\n      //index = c.index\n      //admin_id: \"admin001\"\n      this.sendMessage(obj)\n    },\n    bar_mode_lock(c) {\n      let obj = {}\n      obj.kind = \"mode\"\n      obj.mode = \"lock\"\n      obj.location = c.location\n      //index = c.index\n      //admin_id: \"admin001\"\n      this.sendMessage(obj)\n    },\n    bar_mode_unlock(c) {\n      let obj = {}\n      obj.kind = \"mode\"\n      obj.mode = \"unlock\"\n      obj.location = c.location\n      //index = c.index\n      //admin_id: \"admin001\"\n      this.sendMessage(obj)\n    },\n    barrier_name_check() {\n      this.carmera_list = []\n      for (let i = 0; i < config.barrier_display_list.length; i++) {\n        this.carmera_list.push(config.barrier_display_list[i])\n      }\n      // this.bar_policy_fun_all()\n    },\n    sendMessage(c) {\n      this.$socket.emit(\"message_from_web_client\", c)\n    },\n    start() {\n      //console.log(\"start 함수 시작 \");\n      let that = this\n      let flag = false\n      setInterval(() => {\n        let date = Date.now()\n        let temp_date = format_time_date(new Date(date)).split(\":\")\n        let temp_hh = parseInt(temp_date[0], 10)\n        let temp_mm = parseInt(temp_date[1], 10)\n        if (flag === false && temp_hh === 0 && temp_mm === 0) {\n          that.dataList = []\n          flag = true\n        } else {\n          flag = false\n        }\n        if(that.dataList.length > 100){\n          that.dataList.splice(100, that.dataList.length-100)\n        }\n      },20 * 1000)\n      this.bar_status_query()\n    },\n    bar_status_query() {\n      var obj = {}\n      obj.kind = \"bar_status\"\n      obj.control_id = \"admin001\"\n      console.log(\"bar_status_query\")\n      this.sendMessage(obj)\n    }   \n  }\n}\nfunction get_start_time(str) {\n  var res = str.split(/[-T.:\\s]+/)\n  var d = new Date(\n    parseInt(res[0]),\n    parseInt(res[1]) - 1,\n    parseInt(res[2]),\n    parseInt(res[3]),\n    parseInt(res[4]),\n    0,\n    0\n  )\n  return d.getTime()\n}\n\nfunction get_end_time(str) {\n  var res = str.split(/[-T.:\\s]+/)\n  var d = new Date(\n    parseInt(res[0]),\n    parseInt(res[1]) - 1,\n    parseInt(res[2]),\n    parseInt(res[3]),\n    parseInt(res[4]),\n    59,\n    999\n  )\n  return d.getTime()\n}\n// function format_time_date(dat) {\n//   var str = \"\"\n//   str += num_to_str(dat.getHours())\n//   str += \":\" + num_to_str(dat.getMinutes())\n//   str += \":\" + num_to_str(dat.getSeconds())\n//   return str\n// }\n\nfunction num_to_str($num) {\n  $num < 10 ? ($num = \"0\" + $num) : $num\n  return $num.toString()\n}\nfunction format_time_date(dat) {\n  var str = \"\"\n  str += num_to_str(dat.getHours())\n  str += \":\" + num_to_str(dat.getMinutes())\n  str += \":\" + num_to_str(dat.getSeconds())\n  return str\n}\nfunction itoStr($num) {\n  $num < 10 ? ($num = \"0\" + $num) : $num\n  return $num.toString()\n}\nfunction format_time(dat) {\n  var str = \"\"\n  str += dat.getFullYear()\n  str += \".\" + num_to_str(dat.getMonth() + 1)\n  str += \".\" + num_to_str(dat.getDate())\n  str += \". \" + num_to_str(dat.getHours())\n  str += \":\" + num_to_str(dat.getMinutes())\n  str += \":\" + num_to_str(dat.getSeconds())\n  return str\n}\n</script>\n<style scoped>\n/* @import \"../../assets/css/table.css\"; */\n/* @import \"../../assets/css/vehicleEntryExitLive.css\"; */\n\n</style>\n"]}]}